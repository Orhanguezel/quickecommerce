(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,801529,e=>{e.v([{id:"df",language_code:"default",label:"Türkçe"},{id:"en",language_code:"english",label:"İngilizce"}])},817478,e=>{"use strict";var t=e.i(843476),s=e.i(769542);e.i(614271);var a=e.i(519455);e.s(["SubmitButton",0,({disabled:e,IsLoading:r,UpdateLabel:i,AddLabel:l,UpdateData:n})=>(0,t.jsx)(a.Button,{type:"submit",disabled:e||r,variant:"outline",className:"app-button",children:r?(0,t.jsx)(s.default,{size:"small"}):(0,t.jsx)("span",{children:n?`${i}`:`${l}`})})])},16260,608281,e=>{"use strict";e.i(817478);var t=e.i(843476);e.i(614271);var s=e.i(967489),a=e.i(519455),r=e.i(948148);e.s(["BulkActionBar",0,({selectedAction:e,setSelectedAction:i,selectedRows:l,originalDataLength:n,actions:d,isRequesting:o=!1,handleSelectAll:c,checkboxCustomClass:m="mx-3 md:mx-5"})=>{let u=(0,r.useTranslations)(),h=d.find(t=>t.value===e);return(0,t.jsxs)("div",{className:"relative md:absolute mt-4 md:mt-0 shadow-custom md:shadow-none p-2 md:p-0 bg-white dark:bg-[#1e293b] md:bg-transparent rounded",children:[(0,t.jsxs)("div",{className:"mx-2 flex items-center justify-center gap-2",children:[(0,t.jsxs)(s.Select,{onValueChange:i,value:e,children:[(0,t.jsx)(s.SelectTrigger,{className:"w-full md:w-[180px] border px-4 py-2 rounded app-input",children:(0,t.jsx)(s.SelectValue,{placeholder:u("place_holder.select_action")})}),(0,t.jsx)(s.SelectContent,{children:(0,t.jsxs)(s.SelectGroup,{children:[(0,t.jsx)(s.SelectItem,{value:"none",children:u("common.none")}),d.map(e=>(0,t.jsx)(s.SelectItem,{value:e.value,children:e.label},e.value))]})})]},e),(0,t.jsx)(a.Button,{variant:"outline",className:"app-button my-2",disabled:0===l.size||!h,onClick:()=>h?.onClick(),children:o?`${h?.label}...`:h?.label??u("common.apply")})]}),(0,t.jsx)("div",{className:`absolute z-50 mt-[96px] md:mt-[16px] ${m}`,children:(0,t.jsx)("input",{type:"checkbox",onChange:e=>c(e.target.checked),checked:l.size===n&&n>0})})]})}],608281),e.s([],16260)},994814,e=>{"use strict";var t=e.i(653145);let s=(e,s,a)=>{if(e&&"reportValidity"in e){let r=(0,t.get)(a,s);e.setCustomValidity(r&&r.message||""),e.reportValidity()}},a=(e,t)=>{for(let a in t.fields){let r=t.fields[a];r&&r.ref&&"reportValidity"in r.ref?s(r.ref,a,e):r&&r.refs&&r.refs.forEach(t=>s(t,a,e))}},r=(e,s)=>{s.shouldUseNativeValidation&&a(e,s);let r={};for(let a in e){let l=(0,t.get)(s.fields,a),n=Object.assign(e[a]||{},{ref:l&&l.ref});if(i(s.names||Object.keys(e),a)){let e=Object.assign({},(0,t.get)(r,a));(0,t.set)(e,"root",n),(0,t.set)(r,a,e)}else(0,t.set)(r,a,n)}return r},i=(e,t)=>{let s=l(t);return e.some(e=>l(e).match(`^${s}\\.\\d+`))};function l(e){return e.replace(/\]|\[/g,"")}e.i(292135);var n=e.i(374969),d=e.i(803108);function o(e,t){try{var s=e()}catch(e){return t(e)}return s&&s.then?s.then(void 0,t):s}function c(e,s,i){if(void 0===i&&(i={}),"_def"in e&&"object"==typeof e._def&&"typeName"in e._def)return function(l,n,d){try{return Promise.resolve(o(function(){return Promise.resolve(e["sync"===i.mode?"parse":"parseAsync"](l,s)).then(function(e){return d.shouldUseNativeValidation&&a({},d),{errors:{},values:i.raw?Object.assign({},l):e}})},function(e){if(Array.isArray(null==e?void 0:e.issues))return{values:{},errors:r(function(e,s){for(var a={};e.length;){var r=e[0],i=r.code,l=r.message,n=r.path.join(".");if(!a[n])if("unionErrors"in r){var d=r.unionErrors[0].errors[0];a[n]={message:d.message,type:d.code}}else a[n]={message:l,type:i};if("unionErrors"in r&&r.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),s){var o=a[n].types,c=o&&o[r.code];a[n]=(0,t.appendErrors)(n,s,a,i,c?[].concat(c,r.message):r.message)}e.shift()}return a}(e.errors,!d.shouldUseNativeValidation&&"all"===d.criteriaMode),d)};throw e}))}catch(e){return Promise.reject(e)}};if("_zod"in e&&"object"==typeof e._zod)return function(l,c,m){try{return Promise.resolve(o(function(){return Promise.resolve(("sync"===i.mode?d.parse:d.parseAsync)(e,l,s)).then(function(e){return m.shouldUseNativeValidation&&a({},m),{errors:{},values:i.raw?Object.assign({},l):e}})},function(e){if(e instanceof n.$ZodError)return{values:{},errors:r(function(e,s){for(var a={};e.length;){var r=e[0],i=r.code,l=r.message,n=r.path.join(".");if(!a[n])if("invalid_union"===r.code&&r.errors.length>0){var d=r.errors[0][0];a[n]={message:d.message,type:d.code}}else a[n]={message:l,type:i};if("invalid_union"===r.code&&r.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),s){var o=a[n].types,c=o&&o[r.code];a[n]=(0,t.appendErrors)(n,s,a,i,c?[].concat(c,r.message):r.message)}e.shift()}return a}(e.issues,!m.shouldUseNativeValidation&&"all"===m.criteriaMode),m)};throw e}))}catch(e){return Promise.reject(e)}};throw Error("Invalid input: not a Zod schema")}e.s(["zodResolver",()=>c],994814)},142165,e=>{"use strict";var t=e.i(843476),s=e.i(515288),a=e.i(302747);function r({CustomClass:e=""}){return(0,t.jsx)(s.Card,{className:`mt-4 ${e}`,children:(0,t.jsxs)(s.CardContent,{className:`p-2 md:p-6 ${e}`,children:[(0,t.jsx)("div",{className:"flex gap-x-6 mb-6",children:[1,2,3].map(e=>(0,t.jsx)(a.Skeleton,{className:"h-8 w-24 rounded-md"},e))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 w-full",children:[(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Skeleton,{className:"h-4 w-40 mb-2"}),(0,t.jsx)(a.Skeleton,{className:"h-10 w-full rounded-md"})]},s))}),(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Skeleton,{className:"h-4 w-40 mb-2"}),(0,t.jsx)(a.Skeleton,{className:"h-10 w-full rounded-md"})]},s))})]}),(0,t.jsx)("div",{className:"mt-10",children:(0,t.jsx)(a.Skeleton,{className:"h-10 w-36 rounded-md"})})]})})}e.s(["default",()=>r])},879664,e=>{"use strict";let t=(0,e.i(475254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["default",()=>t])},952571,e=>{"use strict";var t=e.i(879664);e.s(["Info",()=>t.default])},35988,e=>{"use strict";var t=e.i(843476);let s=()=>(0,t.jsx)("div",{children:(0,t.jsxs)("svg",{width:"11",height:"10",viewBox:"0 0 11 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M10.25 9L6.25 5L10.25 1",stroke:"#FF5555",strokeWidth:"0.833333",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M0.5 1L4.5 5L0.5 9",stroke:"#FF5555",strokeWidth:"0.833333",strokeLinecap:"round",strokeLinejoin:"round"})]})});e.s(["default",0,({onClick:e,customClass:a})=>(0,t.jsx)("div",{onClick:e,className:`bg-[#CFCFCF70] hover:bg-gray-400 p-2 rounded cursor-pointer ${a}`,children:(0,t.jsx)(s,{})})],35988)},373765,e=>{"use strict";let t=(0,e.i(475254).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>t])},406321,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},990633,e=>{"use strict";let t=(0,e.i(475254).default)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);e.s(["default",()=>t])},555231,e=>{"use strict";var t=e.i(990633);e.s(["CloudUploadIcon",()=>t.default])},100391,e=>{"use strict";var t=e.i(602904),s=e.i(954616),a=e.i(266027),r=e.i(170319),i=e.i(313430),l=e.i(494881),n=e.i(581949),d=e.i(117595),o=e.i(861745),c=e.i(271645),m=e.i(837706);e.s(["useAltChange",0,()=>{let{create:e}=(0,m.useBaseService)(t.API_ENDPOINTS.PRODUCT_ALT_CHANGE);return(0,s.useMutation)({mutationFn:t=>e(t),mutationKey:[t.API_ENDPOINTS.PRODUCT_ALT_CHANGE],onSuccess:async e=>{r.toast.success(e?.data?.message)},onError:async e=>{let t=e?.response?.data;r.toast.error(t?.message)}})},"useFileUploadService",0,()=>{let e=(0,o.useLocale)(),t=(0,c.useMemo)(()=>{let t=n.default.create({baseURL:i.env.NEXT_PUBLIC_REST_API_ENDPOINT,timeout:5e6,headers:{"Content-Type":"multipart/form-data"}});return t.interceptors.request.use(t=>{let s=d.default.get(l.AUTH_TOKEN_KEY);return t.headers={...t.headers,Authorization:`Bearer ${s||""}`,"X-localization":e},t}),t},[e]);return{uploadFile:async(e,s,a,r)=>{let i=new FormData;i.append("file",e),i.append("store_id",a),i.append("usage_type",r);try{return(await t.post(s,i,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}}}},"useMediaDelete",0,()=>{let{create:e}=(0,m.useBaseService)(t.API_ENDPOINTS.PRODUCT_MEDIA_DELETE);return(0,s.useMutation)({mutationFn:t=>e(t),mutationKey:[t.API_ENDPOINTS.PRODUCT_MEDIA_DELETE],onSuccess:async e=>{r.toast.success(e?.data?.message)},onError:async e=>{let t=e?.response?.data;r.toast.error(t?.message)}})},"useMediaLibraryQuery",0,e=>{let{findAll:s}=(0,m.useBaseService)(t.API_ENDPOINTS.PRODUCT_MEDIA_LIBRARY),{data:r,isPending:i,error:l,refetch:n,isFetching:d}=(0,a.useQuery)({queryKey:[t.API_ENDPOINTS.PRODUCT_MEDIA_LIBRARY],queryFn:()=>s(e),...e});return{mediaLibrary:r?.data??{},error:l,isPending:i,refetch:n,isFetching:d}}],100391)},720126,e=>{"use strict";var t=e.i(843476);e.s(["default",0,()=>(0,t.jsx)("div",{children:(0,t.jsxs)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("g",{clipPath:"url(#clip0_5364_62366)",children:(0,t.jsx)("path",{d:"M20.35 10.04C19.67 6.59 16.64 4 13 4C10.11 4 7.6 5.64 6.35 8.04C3.34 8.36 1 10.91 1 14C1 17.31 3.69 20 7 20H20C22.76 20 25 17.76 25 15C25 12.36 22.95 10.22 20.35 10.04ZM20 18H7C4.79 18 3 16.21 3 14C3 11.95 4.53 10.24 6.56 10.03L7.63 9.92L8.13 8.97C9.08 7.14 10.94 6 13 6C15.62 6 17.88 7.86 18.39 10.43L18.69 11.93L20.22 12.04C21.78 12.14 23 13.45 23 15C23 16.65 21.65 18 20 18ZM9 13H11.55V16H14.45V13H17L13 9L9 13Z",fill:"#1849D6"})}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_5364_62366",children:(0,t.jsx)("rect",{width:"23.84",height:"24",fill:"white",transform:"translate(0.580078)"})})})]})})])},893742,e=>{"use strict";var t=e.i(843476),s=e.i(546266),a=e.i(769542);e.i(614271);var r=e.i(519455),i=e.i(515288),l=e.i(793479),n=e.i(677572),d=e.i(225960),o=e.i(100391),c=e.i(107649),m=e.i(678745),m=m,u=e.i(373765),u=u,h=e.i(657688),x=e.i(618566),p=e.i(271645),f=e.i(170319),g=e.i(632814),j=e.i(948148),v=e.i(536719),b=e.i(602904);let N=["JPG","JPEG","PNG","GIF","webp"];e.s(["default",0,({onSave:e,isMultiple:y,trigger:_,buttonTitle:w="Select Photo",usageType:S,selectedImage:E})=>{let C,k=(0,j.useTranslations)(),[T,I]=(0,p.useState)([]),[P,L]=(0,p.useState)([]),[A,O]=(0,p.useState)(),[M,D]=(0,p.useState)(null),[F,z]=(0,p.useState)([]),[R,U]=(0,p.useState)(!1);(0,x.usePathname)().split("/")[1];let[B,$]=(0,p.useState)("Media Library"),[V,G]=(0,p.useState)(0),[K,H]=(0,p.useState)([]),[q,Q]=(0,p.useState)([]),[Y,Z]=(0,p.useState)(!1),[W,X]=(0,p.useState)(!1),J=(0,v.useAppSelector)(e=>e.store.selectedStore),ee=J?.id??"";(0,p.useEffect)(()=>{R&&E&&(L([E]),O(E),H(e=>e.some(e=>e.image_id==E.image_id)?e:[E,...e]))},[R,E]);let{mediaLibrary:et,refetch:es,isPending:ea}=(0,o.useMediaLibraryQuery)({offset:V,store_id:ee});(0,p.useEffect)(()=>{if(et&&"images"in et){let e=et.images;E&&!e.find(e=>e.image_id==E.image_id)&&(e=[E,...e]),0===q.length&&(Q(e),H(e))}},[et,q.length,E]),(0,p.useEffect)(()=>{G(K.length)},[K]);let er=async()=>{X(!0);try{let e=await es(),t=e?.data?.data?.images||[];t.length>0?H(e=>{let s=new Set(e.map(e=>e.image_id)),a=t.filter(e=>!s.has(e.image_id));return[...e,...a]}):f.toast.info("No new data available.")}catch(e){f.toast.error("Failed to load more images")}finally{X(!1)}},{uploadFile:ei}=(0,o.useFileUploadService)(),el=async e=>{var t;let s=new FileReader;s.onload=t=>{let s=document.createElement("img");s.src=t.target?.result,s.onload=()=>{let{width:t,height:a}=s;D(e)}},s.readAsDataURL(e);let a={id:`${Date.now()}-${e.name}`,file:e,name:e.name,size:(t=e.size)<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`,url:URL.createObjectURL(e),isLoading:!0,isUploaded:!1};if(I(e=>[...e,a]),z(e=>[...e,a]),e)try{let t=await ei(e,b.API_ENDPOINTS.PRODUCT_MEDIA_ADD,ee,S);z(e=>e.map(e=>e.id===a.id?{...e,isLoading:!1,isUploaded:!0}:e)),I(e=>e.map(e=>e.id===a.id?{...e,isLoading:!1,isUploaded:!0}:e)),f.toast.success(t?.message),await es(),G(0)}catch(e){z(e=>e.map(e=>e.id===a.id?{...e,isLoading:!1}:e)),I(e=>e.map(e=>e.id===a.id?{...e,isLoading:!1}:e)),f.toast.error("File upload failed")}},{mutate:en}=(0,o.useMediaDelete)(),ed=e=>{en({image_id:e},{onSuccess:()=>{H(t=>t.filter(t=>t.image_id!==e)),L(t=>t.filter(t=>t.image_id!==e)),A?.image_id===e&&O(void 0),es()},onError:()=>{f.toast.error("Failed to delete image")}})},{mutate:eo}=(0,o.useAltChange)();return(0,t.jsx)(g.AppModal,{trigger:_,disable:!A,actionButtonLabel:w,customClass:"inset-x-0p md:inset-x-5p xl:inset-x-17p top-[100px] bg-white",onSave:()=>{e(P.length>0?P:A?[A]:[]),U(!1)},isOpen:R,onOpenChange:U,cancelButtonLabel:k("button.close"),hideX:!0,children:(0,t.jsx)("div",{children:(0,t.jsxs)(n.Tabs,{value:B,onValueChange:e=>{$(e),"Media Library"===e&&(es(),er())},children:[(0,t.jsxs)(n.TabsList,{className:"text-left bg-white",children:[(0,t.jsx)(n.TabsTrigger,{value:"Upload Files",children:(0,t.jsx)("div",{className:"text-start",children:(0,t.jsx)("h1",{children:k("label.upload_image")})})}),(0,t.jsx)(n.TabsTrigger,{value:"Media Library",children:(0,t.jsx)("div",{className:"text-start",children:(0,t.jsx)("h1",{children:k("label.media_library")})})})]}),(0,t.jsx)(n.TabsContent,{value:"Upload Files",className:"h-[500px] overflow-y-auto lg:overflow-hidden custom-scrollbar",children:(0,t.jsx)("div",{className:"px-2",children:(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"relative overflow-y-auto p-4 border-2 border-dashed border-slate-300 w-full rounded custom-scrollbar h-[480px]",children:[(0,t.jsx)("div",{className:"absolute flex flex-wrap w-auto gap-4",children:Array.isArray(F)&&F.length>0?F.map(e=>(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"relative h-32 w-32 rounded group",children:[(0,t.jsx)(h.default,{loader:d.default,src:e.url,alt:e.file.name,fill:!0,sizes:"128px",unoptimized:!0,className:"h-full w-full rounded"}),e.isLoading?(0,t.jsx)("div",{className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow",children:(0,t.jsx)("div",{className:"h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.isUploaded?(0,t.jsx)("div",{className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow",children:(0,t.jsx)(c.CheckCircleIcon,{className:"h-4 w-4 text-blue-500 animate-pulse"})}):null,(0,t.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-end p-2",children:[(0,t.jsx)("div",{className:"text-white text-xs truncate",title:e.file.name,children:e.file.name}),(0,t.jsxs)("div",{className:"text-white text-xs",children:[(e.file.size/1024).toFixed(2)," KB"]})]})]})},e.id)):""}),(0,t.jsx)(s.default,{handleFileChange:el,fileTypes:N,file:F})]})})})}),(0,t.jsx)(n.TabsContent,{value:"Media Library",className:"h-[500px] overflow-y-auto lg:overflow-hidden custom-scrollbar",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 px-2",children:[(0,t.jsx)("div",{className:"w-full md:w-[81%] flex flex-col rounded-lg  h-[500px]",children:(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 border border-slate-300 rounded custom-scrollbar ",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-4 ",children:Array.isArray(K)&&K.length>0?K.map((e,s)=>{let a;return(0,t.jsx)(i.Card,{onClick:()=>{L(t=>{let s=t.find(t=>t.image_id===e.image_id)?t.filter(t=>t.image_id!==e.image_id):y?[...t,e]:[e];return O(s[s.length-1]),s})},className:`${P.some(t=>t.image_id==e.image_id)?"border border-blue-500 shadow-lg text-white":"text-gray-500 dark:text-white"}rounded cursor-pointer`,children:(0,t.jsxs)("div",{className:`${P.some(t=>t.image_id==e.image_id)?"border-2 border-blue-500 text-white rounded-md":"text-gray-500 dark:text-white"} cursor-pointer relative h-32 w-32 rounded-md group`,children:[(a=(0,d.resolveImageSrc)(e.img_url||e.url||"/images/no-image.png"))?(0,t.jsx)(h.default,{loader:d.default,src:a,alt:e.name||"image",fill:!0,sizes:"128px",unoptimized:!0,className:"h-full w-full rounded"}):null,(0,t.jsx)("div",{className:`${P.some(t=>t.image_id==e.image_id)?"absolute z-10 flex top-0 left-0 bg-blue-500 text-white":"hidden"} `,children:(0,t.jsx)("button",{className:"rounded-full p-1",onClick:t=>{t.stopPropagation(),ed(e.image_id)},children:(0,t.jsx)(m.default,{className:"h-4 w-4 "})})}),(0,t.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-end p-2",children:[(0,t.jsx)("div",{className:"absolute top-1 right-1 rounded-full  shadow bg-white hover:bg-red-500 text-red-500 hover:text-white",children:(0,t.jsx)("button",{className:"rounded-full  p-1",onClick:t=>{t.stopPropagation(),ed(e.image_id)},children:(0,t.jsx)(u.default,{className:"h-4 w-4 "})})}),(0,t.jsx)("div",{className:"text-white text-xs truncate",title:e?.file?.name,children:e?.file?.name}),(0,t.jsx)("div",{className:"text-white text-xs",children:e?.file?.size?`${(e?.file?.size/1024).toFixed(2)} KB`:""})]})]})},e.image_id||e.id||`${e.name}-${s}`)}):""}),K.length>0&&(0,t.jsx)("div",{className:"text-center mt-4",children:(0,t.jsx)(r.Button,{onClick:er,disabled:W,variant:"outline",className:"app-button",children:W?"Loading...":"Load More"})}),ea&&(0,t.jsx)("div",{children:(0,t.jsx)(a.default,{customClass:"mt-32",size:"large"})}),0===K.length&&!ea&&(0,t.jsx)("div",{className:"flex text-center items-center justify-center h-full",children:(0,t.jsx)("h2",{className:" text-center text-sm font-semibold text-gray-700",children:"No Photo Uploaded Yet."})})]})}),(0,t.jsxs)("div",{className:"w-full md:w-[18%] border border-slate-300 rounded h-[500px]",children:[A&&(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Preview Selected Images:"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"relative w-full h-32 rounded shadow-xl border",children:(C=(0,d.resolveImageSrc)(A.img_url||A.url||"/images/no-image.png"))?(0,t.jsx)(h.default,{loader:d.default,src:C,alt:A.name||"image",fill:!0,unoptimized:!0,className:"w-full h-full"}):null},A.id),(0,t.jsxs)("div",{className:"mt-4 text-sm overflow-x-visible",children:[(0,t.jsx)("p",{className:"my-2 truncate overflow-hidden whitespace-nowrap max-w-[150px]",children:A.name}),(0,t.jsx)("p",{className:"my-2",children:A.size}),(0,t.jsx)("p",{className:"my-2",children:A.upload_at}),(0,t.jsx)("p",{className:"my-2",children:A.dimensions}),(0,t.jsx)(l.Input,{type:"text",id:"alt",className:"app-input",placeholder:"Enter value",value:A.alt??"",onChange:e=>{A&&O({...A,alt:e.target.value})}}),(0,t.jsxs)(r.Button,{onClick:()=>{var e,t;return e=A.image_id,t=A.alt,void(Z(!0),eo({image_id:e,alt:t},{onSuccess:()=>{es()},onError:()=>{f.toast.error("Failed to update ALT text")},onSettled:()=>{Z(!1)}}))},variant:"outline",className:"mt-2 app-button",disabled:Y,children:[Y?"Loading...":"Update"," "]})]})]})]}),!A&&(0,t.jsx)("div",{className:"p-2 flex text-center items-center justify-center h-full",children:(0,t.jsx)("h2",{className:"text-center text-sm font-semibold text-gray-700 mb-2",children:"No Photo Selected Yet."})})]})]})})]})})})}],893742)},77705,e=>{"use strict";var t=e.i(211749);e.s(["EyeOff",()=>t.default])},187942,e=>{"use strict";let t=(0,e.i(475254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["default",()=>t])},286536,e=>{"use strict";var t=e.i(187942);e.s(["Eye",()=>t.default])},211749,e=>{"use strict";let t=(0,e.i(475254).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["default",()=>t])},140906,e=>{"use strict";let t=(0,e.i(475254).default)("lock-keyhole-open",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{width:"18",height:"12",x:"3",y:"10",rx:"2",key:"l0tzu3"}],["path",{d:"M7 10V7a5 5 0 0 1 9.33-2.5",key:"car5b7"}]]);e.s(["default",()=>t])},319870,e=>{"use strict";var t=e.i(140906);e.s(["LockKeyholeOpen",()=>t.default])},267909,e=>{"use strict";var t=e.i(843476);e.i(614271);var s=e.i(519455),a=e.i(515288),r=e.i(793479),i=e.i(677572),l=e.i(994814),n=e.i(952571),d=e.i(319870),o=e.i(271645),c=e.i(653145),m=e.i(720126),u=e.i(769542);e.i(16260);var h=e.i(817478),x=e.i(945947),p=e.i(602904),f=e.i(954616),g=e.i(266027),j=e.i(618566),v=e.i(170319),b=e.i(837706),N=e.i(681307),y=e.i(801529);N.z.object({old_password:N.z.string(),new_password:N.z.string()});let _={first_name:N.z.string().min(2,{message:"First name must be at least 2 characters long"}).max(255,{message:"First name must be at most 255 characters long"}),last_name:N.z.string().max(255,{message:"Last name must be at most 255 characters long"}).optional(),phone:N.z.string().optional(),email:N.z.string().min(2,{message:"Email must be at least 2 characters long"}).max(255,{message:"Email must be at most 255 characters long"}).email({message:"Invalid email address"})},w=y.default.filter(e=>"df"!==e.id).reduce((e,t)=>(e[`first_name_${t.id}`]=N.z.string().optional(),e[`last_name_${t.id}`]=N.z.string().optional(),e),{}),S=N.z.object({..._,...w});var E=e.i(306336),C=e.i(948148),k=e.i(657688),T=e.i(35988),I=e.i(893742),P=e.i(286536),L=e.i(77705),A=e.i(225960),O=e.i(142165);let M=({data:e})=>{let N=(0,j.usePathname)(),y=(0,C.useTranslations)(),_=N.split("/")[1],w="ar"===_?"rtl":"ltr",{register:M,handleSubmit:D,formState:{errors:F},setValue:z}=(0,c.useForm)({resolver:(0,l.zodResolver)(S)}),[R,U]=(0,o.useState)("low_stock"),[B,$]=(0,o.useState)(null),[V,G]=(0,o.useState)(""),[K,H]=(0,o.useState)(""),{profileSettingsData:q,refetch:Q,isFetching:Y,isPending:Z,error:W}=(e=>{let{findAll:t}=(0,b.useBaseService)(p.API_ENDPOINTS.PROFILE_SETTINGS),{data:s,isPending:a,error:r,refetch:i,isFetching:l}=(0,g.useQuery)({queryKey:[p.API_ENDPOINTS.PROFILE_SETTINGS],queryFn:()=>t(e),...e});return{profileSettingsData:s?.data??{},error:r,isPending:a,refetch:i,isFetching:l}})({}),{refetch:X}=(0,E.useMeQuery)(),J=(0,o.useMemo)(()=>q||[],[q]),ee=(0,o.useMemo)(()=>J||{},[J]),et=(0,o.useRef)(null);(0,o.useEffect)(()=>{if(!ee||!J)return;let e=ee?.id??null;et.current!==e&&(et.current=e,z("first_name",ee.first_name??""),z("last_name",ee.last_name??""),z("phone",ee.phone??""),z("email",ee.email??""),H(ee.phone??""),$({image_id:ee.image??"",img_url:ee.image_url??"",name:"profile image"}))},[ee,J,z]);let[es,ea]=(0,o.useState)(!1),[er,ei]=(0,o.useState)(""),[el,en]=(0,o.useState)(!1),[ed,eo]=(0,o.useState)(""),[ec,em]=(0,o.useState)(!1),{mutate:eu}=(()=>{let{create:e}=(0,b.useBaseService)(p.API_ENDPOINTS.PROFILE_SETTINGS_PASSWORD_CHANGE);return(0,f.useMutation)({mutationFn:t=>e(t),mutationKey:[p.API_ENDPOINTS.PROFILE_SETTINGS_PASSWORD_CHANGE],onSuccess:async e=>{e?.data?v.toast.success(e?.data?.message):v.toast.error(e?.data?.message)},onError:async e=>{let t=e?.response?.data;t&&"object"==typeof t?Object.entries(t).forEach(([e,t])=>{Array.isArray(t)?t.forEach(e=>v.toast.error(e)):"string"==typeof t&&v.toast.error(t)}):v.toast.error(t?.message)}})})(),{mutate:eh,isPending:ex}=(()=>{(0,j.useRouter)();let{create:e}=(0,b.useBaseService)(p.API_ENDPOINTS.PROFILE_SETTINGS_EDIT);return(0,f.useMutation)({mutationFn:t=>e(t),mutationKey:[p.API_ENDPOINTS.PROFILE_SETTINGS_EDIT],onSuccess:async e=>{e?.data?v.toast.success(e?.data?.message):v.toast.error(e?.data?.message)},onError:async e=>{let t=e?.response?.data;t&&"object"==typeof t?Object.entries(t).forEach(([e,t])=>{Array.isArray(t)?t.forEach(e=>v.toast.error(e)):"string"==typeof t&&v.toast.error(t)}):v.toast.error(t?.message)}})})(),ep=async e=>eh({...{...{first_name:e.first_name,last_name:e.last_name,phone:e.phone,email:e.email,image:B?B?.image_id:""},id:ee?.id?ee?.id:"",multipart:!0}},{onSuccess:()=>{Q(),X()}}),ef=(0,t.jsx)("div",{className:"w-32 h-32 flex flex-col items-center justify-center bg-white text-center rounded cursor-pointer  transition-colors",children:B?.img_url?(0,t.jsxs)("div",{className:"relative w-32 h-32 rounded group",children:[(0,t.jsx)(k.default,{loader:A.default,src:B?.img_url,alt:B?.name,fill:!0,sizes:"128px",className:"w-full h-full border dark:border-gray-500 rounded"}),(0,t.jsxs)("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 bg-blue-50 h-18 opacity-0 w-full group-hover:opacity-90 transition-opacity duration-300 flex flex-col items-center justify-center",children:[(0,t.jsx)(m.default,{}),(0,t.jsx)("p",{className:"text-xs font-semibold text-red-500 mb-2",children:y("common.change_image")})]})]}):(0,t.jsx)("div",{className:"border-2 w-32 h-32 border-dashed border-blue-500 text-center rounded cursor-pointer hover:bg-blue-50 transition-colors flex flex-col items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,t.jsx)(m.default,{}),(0,t.jsx)("p",{className:"mt-2 text-blue-500 font-sm",children:y("common.drag_and_drop")})]})})});return(0,t.jsx)("div",{dir:w,children:Z?(0,t.jsx)(O.default,{}):(0,t.jsxs)(i.Tabs,{defaultValue:"low_stock",value:R,onValueChange:e=>{U(e)},children:[(0,t.jsx)(a.Card,{className:"mt-4",children:(0,t.jsx)(a.CardContent,{className:"p-4",children:(0,t.jsxs)(i.TabsList,{className:"flex items-center justify-start gap-2 bg-transparent",children:[(0,t.jsx)(i.TabsTrigger,{className:`${Y?"pointer-events-none opacity-50":""}`,value:"low_stock",children:(0,t.jsx)("div",{className:"text-start",children:(0,t.jsxs)("h1",{className:"flex items-center gap-1",children:[(0,t.jsx)(n.Info,{className:"w-5"})," ",(0,t.jsx)("span",{className:"text-start text-lg font-semibold",children:y("common.basic_info")})]})})}),(0,t.jsx)(i.TabsTrigger,{className:`${Y?"pointer-events-none opacity-50 cursor-not-allowed":""}`,value:"out_of_stock",children:(0,t.jsx)("div",{className:"text-start",children:(0,t.jsxs)("h1",{className:"flex items-center gap-1",children:[(0,t.jsx)(d.LockKeyholeOpen,{className:"w-5"})," ",(0,t.jsx)("span",{className:"text-start text-lg font-semibold",children:y("common.password_change")})]})})})]})})}),(0,t.jsx)(i.TabsContent,{className:"rounded-xl",value:"low_stock",children:(0,t.jsx)("form",{onSubmit:D(ep),children:(0,t.jsx)(a.Card,{className:"mt-4",children:(0,t.jsxs)(a.CardContent,{className:"p-2 md:p-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("div",{className:"text-lg md:text-2xl font-medium mb-4",children:y("label.basic_information")})}),(0,t.jsxs)("div",{dir:w,className:"grid lg:grid-cols-1 md:grid-cols-1 gap-4",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:y("label.first_name")}),(0,t.jsx)(r.Input,{type:"text",id:"first_name",...M("first_name"),className:"app-input",placeholder:y("place_holder.enter_first_name")}),F.first_name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.first_name?.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:y("label.last_name")}),(0,t.jsx)(r.Input,{type:"text",id:"last_name",...M("last_name"),className:"app-input",placeholder:y("place_holder.enter_last_name")}),F.last_name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.last_name?.message})]}),(0,t.jsxs)("div",{className:"mr-3",children:[(0,t.jsxs)("p",{className:"text-sm font-medium mb-1",children:[y("label.phone")," "]}),(0,t.jsx)(x.default,{value:K,onChange:e=>{H(e),z("phone",e)}}),F.phone&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.phone?.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:y("label.email")}),(0,t.jsx)(r.Input,{type:"text",id:"email",...M("email"),className:"app-input",placeholder:y("place_holder.enter_email")}),F.email&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:F.email?.message})]})]})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("p",{className:"text-sm font-medium my-2",children:y("label.image")}),(0,t.jsxs)("div",{className:"relative w-32",children:[(0,t.jsx)(I.default,{trigger:ef,isMultiple:!1,onSave:e=>{$(e[0]);let[t,s]=(e[0].dimensions??"").split(" x ").map(e=>parseInt(e.trim(),10));return .01>Math.abs(t/s-1)?(G(""),!0):(G("Image must have a 1:1 aspect ratio."),!1)},usageType:"profile_settings",selectedImage:B}),B?.image_id&&(0,t.jsx)(T.default,{customClass:"absolute top-0 right-0 m-1 ",onClick:e=>{e.stopPropagation(),$(null),G("")}}),V&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:V})]})]})]}),(0,t.jsx)("div",{className:"mt-8 ",children:(0,t.jsx)(h.SubmitButton,{IsLoading:ex,AddLabel:y("button.update_profile")})})]})})})}),(0,t.jsx)(i.TabsContent,{className:"rounded-xl",value:"out_of_stock",children:(0,t.jsx)(a.Card,{dir:w,className:"mt-4",children:(0,t.jsxs)(a.CardContent,{className:"p-2 md:p-6",children:[(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsx)("div",{className:"text-lg md:text-2xl font-medium mb-4",children:y("label.change_password")})}),(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:y("label.old_password")}),(0,t.jsxs)("div",{className:"relative flex flex-col items-start justify-start w-full mb-4",children:[(0,t.jsx)(r.Input,{type:el?"text":"password",maxLength:12,placeholder:y("place_holder.enter_old_password"),value:er,onChange:e=>ei(e.target.value),className:"app-input"}),el?(0,t.jsx)("div",{className:`${"ar"===_?"left-4":"right-4"} absolute top-2 cursor-pointer`,children:(0,t.jsx)(P.Eye,{className:"text-gray-500 dark:text-white w-5",onClick:()=>en(!el)})}):(0,t.jsx)("div",{className:`${"ar"===_?"left-4":"right-4"} absolute top-2 cursor-pointer`,children:(0,t.jsx)(L.EyeOff,{className:"text-gray-500 dark:text-white w-5",onClick:()=>en(!el)})})]}),(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:y("label.new_password")}),(0,t.jsxs)("div",{className:"relative flex flex-col items-start justify-start w-full mb-4",children:[(0,t.jsx)(r.Input,{type:ec?"text":"password",maxLength:12,placeholder:y("place_holder.enter_new_password"),value:ed,onChange:e=>eo(e.target.value),className:"app-input"}),ec?(0,t.jsx)("div",{className:`${"ar"===_?"left-4":"right-4"} absolute top-2 cursor-pointer`,children:(0,t.jsx)(P.Eye,{className:"text-gray-500 dark:text-white w-5",onClick:()=>em(!ec)})}):(0,t.jsx)("div",{className:`${"ar"===_?"left-4":"right-4"} absolute top-2 cursor-pointer`,children:(0,t.jsx)(L.EyeOff,{className:"text-gray-500 dark:text-white w-5",onClick:()=>em(!ec)})})]})]}),(0,t.jsx)(s.Button,{className:"app-button mt-4",onClick:()=>er.trim()&&ed.trim()?er===ed?v.toast.error(y("toast.password_must_be_different")):(ea(!0),void eu({old_password:er,new_password:ed},{onSuccess:()=>{ea(!1),ei(""),eo("")},onError:e=>{v.toast.error(e instanceof Error?`Error refetching data: ${e.message}`:"An unknown error occurred while refetching data"),ea(!1)}})):v.toast.error(y("toast.both_password_fields_are_required")),children:es?(0,t.jsx)(u.default,{size:"small",color:"text-white"}):(0,t.jsx)("span",{children:y("button.change_password")})})]})})})]})})};e.s(["default",0,()=>{let e=(0,C.useTranslations)();return(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Card,{children:(0,t.jsx)(a.CardContent,{className:"flex flex-col md:flex-row gap-4  justify-between p-2 md:p-4",children:(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-lg md:text-2xl font-semibold text-black dark:text-white flex items-center gap-2",children:e("label.profile_settings")})})})}),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(M,{})})]})}],267909)}]);