(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,817478,e=>{"use strict";var t=e.i(843476),s=e.i(769542);e.i(614271);var a=e.i(519455);e.s(["SubmitButton",0,({disabled:e,IsLoading:i,UpdateLabel:r,AddLabel:l,UpdateData:n})=>(0,t.jsx)(a.Button,{type:"submit",disabled:e||i,variant:"outline",className:"app-button",children:i?(0,t.jsx)(s.default,{size:"small"}):(0,t.jsx)("span",{children:n?`${r}`:`${l}`})})])},16260,608281,e=>{"use strict";e.i(817478);var t=e.i(843476);e.i(614271);var s=e.i(967489),a=e.i(519455),i=e.i(948148);e.s(["BulkActionBar",0,({selectedAction:e,setSelectedAction:r,selectedRows:l,originalDataLength:n,actions:o,isRequesting:d=!1,handleSelectAll:c,checkboxCustomClass:u="mx-3 md:mx-5"})=>{let m=(0,i.useTranslations)(),p=o.find(t=>t.value===e);return(0,t.jsxs)("div",{className:"relative md:absolute mt-4 md:mt-0 shadow-custom md:shadow-none p-2 md:p-0 bg-white dark:bg-[#1e293b] md:bg-transparent rounded",children:[(0,t.jsxs)("div",{className:"mx-2 flex items-center justify-center gap-2",children:[(0,t.jsxs)(s.Select,{onValueChange:r,value:e,children:[(0,t.jsx)(s.SelectTrigger,{className:"w-full md:w-[180px] border px-4 py-2 rounded app-input",children:(0,t.jsx)(s.SelectValue,{placeholder:m("place_holder.select_action")})}),(0,t.jsx)(s.SelectContent,{children:(0,t.jsxs)(s.SelectGroup,{children:[(0,t.jsx)(s.SelectItem,{value:"none",children:m("common.none")}),o.map(e=>(0,t.jsx)(s.SelectItem,{value:e.value,children:e.label},e.value))]})})]},e),(0,t.jsx)(a.Button,{variant:"outline",className:"app-button my-2",disabled:0===l.size||!p,onClick:()=>p?.onClick(),children:d?`${p?.label}...`:p?.label??m("common.apply")})]}),(0,t.jsx)("div",{className:`absolute z-50 mt-[96px] md:mt-[16px] ${u}`,children:(0,t.jsx)("input",{type:"checkbox",onChange:e=>c(e.target.checked),checked:l.size===n&&n>0})})]})}],608281),e.s([],16260)},994814,e=>{"use strict";var t=e.i(653145);let s=(e,s,a)=>{if(e&&"reportValidity"in e){let i=(0,t.get)(a,s);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},a=(e,t)=>{for(let a in t.fields){let i=t.fields[a];i&&i.ref&&"reportValidity"in i.ref?s(i.ref,a,e):i&&i.refs&&i.refs.forEach(t=>s(t,a,e))}},i=(e,s)=>{s.shouldUseNativeValidation&&a(e,s);let i={};for(let a in e){let l=(0,t.get)(s.fields,a),n=Object.assign(e[a]||{},{ref:l&&l.ref});if(r(s.names||Object.keys(e),a)){let e=Object.assign({},(0,t.get)(i,a));(0,t.set)(e,"root",n),(0,t.set)(i,a,e)}else(0,t.set)(i,a,n)}return i},r=(e,t)=>{let s=l(t);return e.some(e=>l(e).match(`^${s}\\.\\d+`))};function l(e){return e.replace(/\]|\[/g,"")}e.i(292135);var n=e.i(374969),o=e.i(803108);function d(e,t){try{var s=e()}catch(e){return t(e)}return s&&s.then?s.then(void 0,t):s}function c(e,s,r){if(void 0===r&&(r={}),"_def"in e&&"object"==typeof e._def&&"typeName"in e._def)return function(l,n,o){try{return Promise.resolve(d(function(){return Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](l,s)).then(function(e){return o.shouldUseNativeValidation&&a({},o),{errors:{},values:r.raw?Object.assign({},l):e}})},function(e){if(Array.isArray(null==e?void 0:e.issues))return{values:{},errors:i(function(e,s){for(var a={};e.length;){var i=e[0],r=i.code,l=i.message,n=i.path.join(".");if(!a[n])if("unionErrors"in i){var o=i.unionErrors[0].errors[0];a[n]={message:o.message,type:o.code}}else a[n]={message:l,type:r};if("unionErrors"in i&&i.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),s){var d=a[n].types,c=d&&d[i.code];a[n]=(0,t.appendErrors)(n,s,a,r,c?[].concat(c,i.message):i.message)}e.shift()}return a}(e.errors,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)};throw e}))}catch(e){return Promise.reject(e)}};if("_zod"in e&&"object"==typeof e._zod)return function(l,c,u){try{return Promise.resolve(d(function(){return Promise.resolve(("sync"===r.mode?o.parse:o.parseAsync)(e,l,s)).then(function(e){return u.shouldUseNativeValidation&&a({},u),{errors:{},values:r.raw?Object.assign({},l):e}})},function(e){if(e instanceof n.$ZodError)return{values:{},errors:i(function(e,s){for(var a={};e.length;){var i=e[0],r=i.code,l=i.message,n=i.path.join(".");if(!a[n])if("invalid_union"===i.code&&i.errors.length>0){var o=i.errors[0][0];a[n]={message:o.message,type:o.code}}else a[n]={message:l,type:r};if("invalid_union"===i.code&&i.errors.forEach(function(t){return t.forEach(function(t){return e.push(t)})}),s){var d=a[n].types,c=d&&d[i.code];a[n]=(0,t.appendErrors)(n,s,a,r,c?[].concat(c,i.message):i.message)}e.shift()}return a}(e.issues,!u.shouldUseNativeValidation&&"all"===u.criteriaMode),u)};throw e}))}catch(e){return Promise.reject(e)}};throw Error("Invalid input: not a Zod schema")}e.s(["zodResolver",()=>c],994814)},142165,e=>{"use strict";var t=e.i(843476),s=e.i(515288),a=e.i(302747);function i({CustomClass:e=""}){return(0,t.jsx)(s.Card,{className:`mt-4 ${e}`,children:(0,t.jsxs)(s.CardContent,{className:`p-2 md:p-6 ${e}`,children:[(0,t.jsx)("div",{className:"flex gap-x-6 mb-6",children:[1,2,3].map(e=>(0,t.jsx)(a.Skeleton,{className:"h-8 w-24 rounded-md"},e))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 w-full",children:[(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Skeleton,{className:"h-4 w-40 mb-2"}),(0,t.jsx)(a.Skeleton,{className:"h-10 w-full rounded-md"})]},s))}),(0,t.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((e,s)=>(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Skeleton,{className:"h-4 w-40 mb-2"}),(0,t.jsx)(a.Skeleton,{className:"h-10 w-full rounded-md"})]},s))})]}),(0,t.jsx)("div",{className:"mt-10",children:(0,t.jsx)(a.Skeleton,{className:"h-10 w-36 rounded-md"})})]})})}e.s(["default",()=>i])},879664,e=>{"use strict";let t=(0,e.i(475254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["default",()=>t])},952571,e=>{"use strict";var t=e.i(879664);e.s(["Info",()=>t.default])},35988,e=>{"use strict";var t=e.i(843476);let s=()=>(0,t.jsx)("div",{children:(0,t.jsxs)("svg",{width:"11",height:"10",viewBox:"0 0 11 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M10.25 9L6.25 5L10.25 1",stroke:"#FF5555",strokeWidth:"0.833333",strokeLinecap:"round",strokeLinejoin:"round"}),(0,t.jsx)("path",{d:"M0.5 1L4.5 5L0.5 9",stroke:"#FF5555",strokeWidth:"0.833333",strokeLinecap:"round",strokeLinejoin:"round"})]})});e.s(["default",0,({onClick:e,customClass:a})=>(0,t.jsx)("div",{onClick:e,className:`bg-[#CFCFCF70] hover:bg-gray-400 p-2 rounded cursor-pointer ${a}`,children:(0,t.jsx)(s,{})})],35988)},373765,e=>{"use strict";let t=(0,e.i(475254).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>t])},406321,e=>{"use strict";let t=(0,e.i(475254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>t])},990633,e=>{"use strict";let t=(0,e.i(475254).default)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);e.s(["default",()=>t])},555231,e=>{"use strict";var t=e.i(990633);e.s(["CloudUploadIcon",()=>t.default])},100391,e=>{"use strict";var t=e.i(602904),s=e.i(954616),a=e.i(266027),i=e.i(170319),r=e.i(313430),l=e.i(494881),n=e.i(581949),o=e.i(117595),d=e.i(861745),c=e.i(271645),u=e.i(837706);e.s(["useAltChange",0,()=>{let{create:e}=(0,u.useBaseService)(t.API_ENDPOINTS.PRODUCT_ALT_CHANGE);return(0,s.useMutation)({mutationFn:t=>e(t),mutationKey:[t.API_ENDPOINTS.PRODUCT_ALT_CHANGE],onSuccess:async e=>{i.toast.success(e?.data?.message)},onError:async e=>{let t=e?.response?.data;i.toast.error(t?.message)}})},"useFileUploadService",0,()=>{let e=(0,d.useLocale)(),t=(0,c.useMemo)(()=>{let t=n.default.create({baseURL:r.env.NEXT_PUBLIC_REST_API_ENDPOINT,timeout:5e6,headers:{"Content-Type":"multipart/form-data"}});return t.interceptors.request.use(t=>{let s=o.default.get(l.AUTH_TOKEN_KEY);return t.headers={...t.headers,Authorization:`Bearer ${s||""}`,"X-localization":e},t}),t},[e]);return{uploadFile:async(e,s,a,i)=>{let r=new FormData;r.append("file",e),r.append("store_id",a),r.append("usage_type",i);try{return(await t.post(s,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}}}},"useMediaDelete",0,()=>{let{create:e}=(0,u.useBaseService)(t.API_ENDPOINTS.PRODUCT_MEDIA_DELETE);return(0,s.useMutation)({mutationFn:t=>e(t),mutationKey:[t.API_ENDPOINTS.PRODUCT_MEDIA_DELETE],onSuccess:async e=>{i.toast.success(e?.data?.message)},onError:async e=>{let t=e?.response?.data;i.toast.error(t?.message)}})},"useMediaLibraryQuery",0,e=>{let{findAll:s}=(0,u.useBaseService)(t.API_ENDPOINTS.PRODUCT_MEDIA_LIBRARY),{data:i,isPending:r,error:l,refetch:n,isFetching:o}=(0,a.useQuery)({queryKey:[t.API_ENDPOINTS.PRODUCT_MEDIA_LIBRARY],queryFn:()=>s(e),...e});return{mediaLibrary:i?.data??{},error:l,isPending:r,refetch:n,isFetching:o}}],100391)},720126,e=>{"use strict";var t=e.i(843476);e.s(["default",0,()=>(0,t.jsx)("div",{children:(0,t.jsxs)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("g",{clipPath:"url(#clip0_5364_62366)",children:(0,t.jsx)("path",{d:"M20.35 10.04C19.67 6.59 16.64 4 13 4C10.11 4 7.6 5.64 6.35 8.04C3.34 8.36 1 10.91 1 14C1 17.31 3.69 20 7 20H20C22.76 20 25 17.76 25 15C25 12.36 22.95 10.22 20.35 10.04ZM20 18H7C4.79 18 3 16.21 3 14C3 11.95 4.53 10.24 6.56 10.03L7.63 9.92L8.13 8.97C9.08 7.14 10.94 6 13 6C15.62 6 17.88 7.86 18.39 10.43L18.69 11.93L20.22 12.04C21.78 12.14 23 13.45 23 15C23 16.65 21.65 18 20 18ZM9 13H11.55V16H14.45V13H17L13 9L9 13Z",fill:"#1849D6"})}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_5364_62366",children:(0,t.jsx)("rect",{width:"23.84",height:"24",fill:"white",transform:"translate(0.580078)"})})})]})})])},893742,e=>{"use strict";var t=e.i(843476),s=e.i(546266),a=e.i(769542);e.i(614271);var i=e.i(519455),r=e.i(515288),l=e.i(793479),n=e.i(677572),o=e.i(225960),d=e.i(100391),c=e.i(107649),u=e.i(678745),u=u,m=e.i(373765),m=m,p=e.i(657688),h=e.i(618566),x=e.i(271645),g=e.i(170319),_=e.i(632814),f=e.i(948148),y=e.i(536719),v=e.i(602904);let j=["JPG","JPEG","PNG","GIF","webp"];e.s(["default",0,({onSave:e,isMultiple:b,trigger:N,buttonTitle:w="Select Photo",usageType:k,selectedImage:z})=>{let C,E=(0,f.useTranslations)(),[S,T]=(0,x.useState)([]),[P,A]=(0,x.useState)([]),[L,I]=(0,x.useState)(),[M,D]=(0,x.useState)(null),[F,O]=(0,x.useState)([]),[U,B]=(0,x.useState)(!1);(0,h.usePathname)().split("/")[1];let[$,R]=(0,x.useState)("Media Library"),[G,Y]=(0,x.useState)(0),[V,K]=(0,x.useState)([]),[W,q]=(0,x.useState)([]),[H,Q]=(0,x.useState)(!1),[Z,X]=(0,x.useState)(!1),J=(0,y.useAppSelector)(e=>e.store.selectedStore),ee=J?.id??"";(0,x.useEffect)(()=>{U&&z&&(A([z]),I(z),K(e=>e.some(e=>e.image_id==z.image_id)?e:[z,...e]))},[U,z]);let{mediaLibrary:et,refetch:es,isPending:ea}=(0,d.useMediaLibraryQuery)({offset:G,store_id:ee});(0,x.useEffect)(()=>{if(et&&"images"in et){let e=et.images;z&&!e.find(e=>e.image_id==z.image_id)&&(e=[z,...e]),0===W.length&&(q(e),K(e))}},[et,W.length,z]),(0,x.useEffect)(()=>{Y(V.length)},[V]);let ei=async()=>{X(!0);try{let e=await es(),t=e?.data?.data?.images||[];t.length>0?K(e=>{let s=new Set(e.map(e=>e.image_id)),a=t.filter(e=>!s.has(e.image_id));return[...e,...a]}):g.toast.info("No new data available.")}catch(e){g.toast.error("Failed to load more images")}finally{X(!1)}},{uploadFile:er}=(0,d.useFileUploadService)(),el=async e=>{var t;let s=new FileReader;s.onload=t=>{let s=document.createElement("img");s.src=t.target?.result,s.onload=()=>{let{width:t,height:a}=s;D(e)}},s.readAsDataURL(e);let a={id:`${Date.now()}-${e.name}`,file:e,name:e.name,size:(t=e.size)<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`,url:URL.createObjectURL(e),isLoading:!0,isUploaded:!1};if(T(e=>[...e,a]),O(e=>[...e,a]),e)try{let t=await er(e,v.API_ENDPOINTS.PRODUCT_MEDIA_ADD,ee,k);O(e=>e.map(e=>e.id===a.id?{...e,isLoading:!1,isUploaded:!0}:e)),T(e=>e.map(e=>e.id===a.id?{...e,isLoading:!1,isUploaded:!0}:e)),g.toast.success(t?.message),await es(),Y(0)}catch(e){O(e=>e.map(e=>e.id===a.id?{...e,isLoading:!1}:e)),T(e=>e.map(e=>e.id===a.id?{...e,isLoading:!1}:e)),g.toast.error("File upload failed")}},{mutate:en}=(0,d.useMediaDelete)(),eo=e=>{en({image_id:e},{onSuccess:()=>{K(t=>t.filter(t=>t.image_id!==e)),A(t=>t.filter(t=>t.image_id!==e)),L?.image_id===e&&I(void 0),es()},onError:()=>{g.toast.error("Failed to delete image")}})},{mutate:ed}=(0,d.useAltChange)();return(0,t.jsx)(_.AppModal,{trigger:N,disable:!L,actionButtonLabel:w,customClass:"inset-x-0p md:inset-x-5p xl:inset-x-17p top-[100px] bg-white",onSave:()=>{e(P.length>0?P:L?[L]:[]),B(!1)},isOpen:U,onOpenChange:B,cancelButtonLabel:E("button.close"),hideX:!0,children:(0,t.jsx)("div",{children:(0,t.jsxs)(n.Tabs,{value:$,onValueChange:e=>{R(e),"Media Library"===e&&(es(),ei())},children:[(0,t.jsxs)(n.TabsList,{className:"text-left bg-white",children:[(0,t.jsx)(n.TabsTrigger,{value:"Upload Files",children:(0,t.jsx)("div",{className:"text-start",children:(0,t.jsx)("h1",{children:E("label.upload_image")})})}),(0,t.jsx)(n.TabsTrigger,{value:"Media Library",children:(0,t.jsx)("div",{className:"text-start",children:(0,t.jsx)("h1",{children:E("label.media_library")})})})]}),(0,t.jsx)(n.TabsContent,{value:"Upload Files",className:"h-[500px] overflow-y-auto lg:overflow-hidden custom-scrollbar",children:(0,t.jsx)("div",{className:"px-2",children:(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"relative overflow-y-auto p-4 border-2 border-dashed border-slate-300 w-full rounded custom-scrollbar h-[480px]",children:[(0,t.jsx)("div",{className:"absolute flex flex-wrap w-auto gap-4",children:Array.isArray(F)&&F.length>0?F.map(e=>(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"relative h-32 w-32 rounded group",children:[(0,t.jsx)(p.default,{loader:o.default,src:e.url,alt:e.file.name,fill:!0,sizes:"128px",unoptimized:!0,className:"h-full w-full rounded"}),e.isLoading?(0,t.jsx)("div",{className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow",children:(0,t.jsx)("div",{className:"h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.isUploaded?(0,t.jsx)("div",{className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow",children:(0,t.jsx)(c.CheckCircleIcon,{className:"h-4 w-4 text-blue-500 animate-pulse"})}):null,(0,t.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-end p-2",children:[(0,t.jsx)("div",{className:"text-white text-xs truncate",title:e.file.name,children:e.file.name}),(0,t.jsxs)("div",{className:"text-white text-xs",children:[(e.file.size/1024).toFixed(2)," KB"]})]})]})},e.id)):""}),(0,t.jsx)(s.default,{handleFileChange:el,fileTypes:j,file:F})]})})})}),(0,t.jsx)(n.TabsContent,{value:"Media Library",className:"h-[500px] overflow-y-auto lg:overflow-hidden custom-scrollbar",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 px-2",children:[(0,t.jsx)("div",{className:"w-full md:w-[81%] flex flex-col rounded-lg  h-[500px]",children:(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 border border-slate-300 rounded custom-scrollbar ",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-4 ",children:Array.isArray(V)&&V.length>0?V.map((e,s)=>{let a;return(0,t.jsx)(r.Card,{onClick:()=>{A(t=>{let s=t.find(t=>t.image_id===e.image_id)?t.filter(t=>t.image_id!==e.image_id):b?[...t,e]:[e];return I(s[s.length-1]),s})},className:`${P.some(t=>t.image_id==e.image_id)?"border border-blue-500 shadow-lg text-white":"text-gray-500 dark:text-white"}rounded cursor-pointer`,children:(0,t.jsxs)("div",{className:`${P.some(t=>t.image_id==e.image_id)?"border-2 border-blue-500 text-white rounded-md":"text-gray-500 dark:text-white"} cursor-pointer relative h-32 w-32 rounded-md group`,children:[(a=(0,o.resolveImageSrc)(e.img_url||e.url||"/images/no-image.png"))?(0,t.jsx)(p.default,{loader:o.default,src:a,alt:e.name||"image",fill:!0,sizes:"128px",unoptimized:!0,className:"h-full w-full rounded"}):null,(0,t.jsx)("div",{className:`${P.some(t=>t.image_id==e.image_id)?"absolute z-10 flex top-0 left-0 bg-blue-500 text-white":"hidden"} `,children:(0,t.jsx)("button",{className:"rounded-full p-1",onClick:t=>{t.stopPropagation(),eo(e.image_id)},children:(0,t.jsx)(u.default,{className:"h-4 w-4 "})})}),(0,t.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-end p-2",children:[(0,t.jsx)("div",{className:"absolute top-1 right-1 rounded-full  shadow bg-white hover:bg-red-500 text-red-500 hover:text-white",children:(0,t.jsx)("button",{className:"rounded-full  p-1",onClick:t=>{t.stopPropagation(),eo(e.image_id)},children:(0,t.jsx)(m.default,{className:"h-4 w-4 "})})}),(0,t.jsx)("div",{className:"text-white text-xs truncate",title:e?.file?.name,children:e?.file?.name}),(0,t.jsx)("div",{className:"text-white text-xs",children:e?.file?.size?`${(e?.file?.size/1024).toFixed(2)} KB`:""})]})]})},e.image_id||e.id||`${e.name}-${s}`)}):""}),V.length>0&&(0,t.jsx)("div",{className:"text-center mt-4",children:(0,t.jsx)(i.Button,{onClick:ei,disabled:Z,variant:"outline",className:"app-button",children:Z?"Loading...":"Load More"})}),ea&&(0,t.jsx)("div",{children:(0,t.jsx)(a.default,{customClass:"mt-32",size:"large"})}),0===V.length&&!ea&&(0,t.jsx)("div",{className:"flex text-center items-center justify-center h-full",children:(0,t.jsx)("h2",{className:" text-center text-sm font-semibold text-gray-700",children:"No Photo Uploaded Yet."})})]})}),(0,t.jsxs)("div",{className:"w-full md:w-[18%] border border-slate-300 rounded h-[500px]",children:[L&&(0,t.jsxs)("div",{className:"p-2",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Preview Selected Images:"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"relative w-full h-32 rounded shadow-xl border",children:(C=(0,o.resolveImageSrc)(L.img_url||L.url||"/images/no-image.png"))?(0,t.jsx)(p.default,{loader:o.default,src:C,alt:L.name||"image",fill:!0,unoptimized:!0,className:"w-full h-full"}):null},L.id),(0,t.jsxs)("div",{className:"mt-4 text-sm overflow-x-visible",children:[(0,t.jsx)("p",{className:"my-2 truncate overflow-hidden whitespace-nowrap max-w-[150px]",children:L.name}),(0,t.jsx)("p",{className:"my-2",children:L.size}),(0,t.jsx)("p",{className:"my-2",children:L.upload_at}),(0,t.jsx)("p",{className:"my-2",children:L.dimensions}),(0,t.jsx)(l.Input,{type:"text",id:"alt",className:"app-input",placeholder:"Enter value",value:L.alt??"",onChange:e=>{L&&I({...L,alt:e.target.value})}}),(0,t.jsxs)(i.Button,{onClick:()=>{var e,t;return e=L.image_id,t=L.alt,void(Q(!0),ed({image_id:e,alt:t},{onSuccess:()=>{es()},onError:()=>{g.toast.error("Failed to update ALT text")},onSettled:()=>{Q(!1)}}))},variant:"outline",className:"mt-2 app-button",disabled:H,children:[H?"Loading...":"Update"," "]})]})]})]}),!L&&(0,t.jsx)("div",{className:"p-2 flex text-center items-center justify-center h-full",children:(0,t.jsx)("h2",{className:"text-center text-sm font-semibold text-gray-700 mb-2",children:"No Photo Selected Yet."})})]})]})})]})})})}],893742)},383595,e=>{"use strict";var t=e.i(843476);e.i(614271);var s=e.i(515288),a=e.i(602904),i=e.i(954616),r=e.i(266027),l=e.i(170319),n=e.i(837706);let o=e=>(0,n.useBaseService)(e);var d=e.i(271645),c=e.i(536719),u=e.i(560989),m=e.i(720126);e.i(16260);var p=e.i(817478),h=e.i(893742),x=e.i(142165),g=e.i(793479),_=e.i(699375),f=e.i(624687),y=e.i(746798),v=e.i(225960),j=e.i(975157),b=e.i(681307);let N={currency_settings:b.z.string().optional(),com_site_global_currency:b.z.string().optional(),com_site_enable_disable_decimal_point:b.z.string().optional(),com_site_space_between_amount_and_symbol:b.z.string().optional(),com_site_comma_form_adjustment_amount:b.z.string().optional(),com_site_currency_symbol_position:b.z.string().optional(),com_site_default_currency_to_usd_exchange_rate:b.z.string().optional(),com_site_default_currency_to_myr_exchange_rate:b.z.string().optional(),com_site_default_currency_to_brl_exchange_rate:b.z.string().optional(),com_site_default_currency_to_zar_exchange_rate:b.z.string().optional(),com_site_default_currency_to_ngn_exchange_rate:b.z.string().optional()};b.z.object({...N});let w={gateway_name:b.z.string().optional(),description:b.z.string().optional(),paypal_sandbox_client_id:b.z.string().optional(),paypal_sandbox_client_secret:b.z.string().optional(),paypal_sandbox_client_app_id:b.z.string().optional(),paypal_live_client_id:b.z.string().optional(),paypal_live_client_secret:b.z.string().optional(),paypal_live_app_id:b.z.string().optional(),stripe_public_key:b.z.string().optional(),stripe_secret_key:b.z.string().optional(),stripe_webhook_secret:b.z.string().optional(),stripe_success_url:b.z.string().optional(),stripe_cancel_url:b.z.string().optional(),paytm_merchant_key:b.z.string().optional(),paytm_merchant_mid:b.z.string().optional(),paytm_merchant_website:b.z.string().optional(),paytm_channel:b.z.string().optional(),paytm_industry_type:b.z.string().optional(),paystack_public_key:b.z.string().optional(),paystack_secret_key:b.z.string().optional(),paystack_merchant_email:b.z.string().optional(),mollie_public_key:b.z.string().optional(),zitopay_username:b.z.string().optional(),paytabs_profile_id:b.z.string().optional(),paytabs_region:b.z.string().optional(),paytabs_server_key:b.z.string().optional(),billplz_key:b.z.string().optional(),billplz_version:b.z.string().optional(),billplz_x_signature:b.z.string().optional(),billplz_collection_name:b.z.string().optional(),flutterwave_public_key:b.z.string().optional(),flutterwave_secret_key:b.z.string().optional(),flutterwave_secret_hash:b.z.string().optional(),manual_payment_name:b.z.string().optional()},k=b.z.object({...w}).passthrough();var z=e.i(994814),C=e.i(952571),E=e.i(948148),S=e.i(657688),T=e.i(618566),P=e.i(653145),A=e.i(35988);let L={iyzico:["api_key","secret_key","marketplace_mode","sub_merchant_key","store_sub_merchant_keys"]},I=({getwayname:e="cash_on_delivery",paymentgetway:r,refetch:o,refetchList:c,isPending:u,error:b})=>{let N=(0,T.usePathname)().split("/")[1],{register:w,setValue:I,handleSubmit:M}=(0,P.useForm)({resolver:(0,z.zodResolver)(k)}),D=(0,E.useTranslations)(),[F,O]=(0,d.useState)(null),[U,B]=(0,d.useState)({status:!1,is_test_mode:!1}),[$,R]=(0,d.useState)(!1),G=(0,d.useMemo)(()=>r||{},[r]),Y=(0,d.useMemo)(()=>{let t=G?.auth_credentials;return Array.from(new Set([...t&&"object"==typeof t?Object.keys(t):[],...L[e]??[]]))},[G?.auth_credentials,e]);(0,d.useEffect)(()=>{I("gateway_name",e??""),I("description",G?.description??""),Y.forEach(e=>{I(e,G?.auth_credentials?.[e]??"")}),O({image_id:G?.image||"",img_url:G?.image_url||"",name:"Logo"}),B({status:!!G?.status,is_test_mode:!!G?.is_test_mode});let t=G?.auth_credentials?.marketplace_mode;R("boolean"==typeof t?t:["1","true","yes","on"].includes(String(t??"").trim().toLowerCase()))},[Y,G,e,I]);let V=e=>{B(t=>({...t,[e]:!t[e]}))},{mutate:K,isPending:W}=(e=>{let t,{create:s}=(t=a.API_ENDPOINTS.PAYMENT_GETWAY+"/"+e,(0,n.useBaseService)(t));return(0,i.useMutation)({mutationFn:e=>s(e),mutationKey:[a.API_ENDPOINTS.PAYMENT_GETWAY+"/"+e],onSuccess:async e=>{e?.data?l.toast.success(e?.data?.message):l.toast.error(e?.data?.message)},onError:async e=>{let t=e?.response?.data;l.toast.error(t?.message)}})})(e),q=async t=>{let s=Object.fromEntries(Y.filter(e=>"marketplace_mode"!==e).map(e=>[e,t?.[e]??""]));"iyzico"===e&&(s.marketplace_mode=$,$||(s.sub_merchant_key=null,s.store_sub_merchant_keys=null));let a=F?.image_id?String(F.image_id):void 0;return K({id:G?.id?G.id:0,name:G?.name||(0,j.formatLabel)(e||"","_"),description:t.description,auth_credentials:Y.length?s:null,status:U.status,is_test_mode:U.is_test_mode,image:a},{onSuccess:()=>{o(),c?.()}})};(0,d.useEffect)(()=>{u||b||o()},[b,u,o]);let H=(0,t.jsx)("div",{className:"hover:cursor-pointer",children:F?.img_url?(0,t.jsxs)("div",{className:"relative w-32 h-24 group",children:[(0,t.jsx)(S.default,{loader:v.default,src:F.img_url,alt:F.name,fill:!0,sizes:"128px",className:"w-full h-full border dark:border-gray-500 rounded p-4"}),(0,t.jsxs)("div",{className:" absolute bottom-0 left-1/2 -translate-x-1/2 bg-[#FFFFFFE5] border-l border-r border-b w-full rounded-b opacity-0 group-hover:opacity-90 transition-opacity duration-300 flex flex-col items-center justify-center",children:[(0,t.jsx)(m.default,{}),(0,t.jsx)("p",{className:"text-xs font-bold text-red-500 p-1",children:D("common.change_image")})]})]}):(0,t.jsx)("div",{className:" w-32 h-24 border-2 border-dashed border-blue-500  text-center rounded-lg cursor-pointer hover:bg-blue-50 transition-colors",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center mt-2",children:[(0,t.jsx)(m.default,{}),(0,t.jsx)("p",{className:"mt-2 text-blue-500 text-xs font-medium",children:D("common.drag_and_drop")})]})})});return(0,t.jsx)("div",{children:u?(0,t.jsx)(x.default,{CustomClass:"!p-2 !shadow-none"}):(0,t.jsx)("form",{onSubmit:M(q),children:(0,t.jsxs)(s.CardContent,{className:"p-2 md:p-4",children:[(0,t.jsx)("p",{className:"text-lg md:text-2xl font-medium mb-4",children:"Payment Getway"}),(0,t.jsxs)("div",{dir:"ar"===N?"rtl":"ltr",children:[(0,t.jsxs)("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 border-l-8 border-blue-600",children:["If your currency is not available in"," ",(0,t.jsx)("strong",{children:(0,t.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})}),", it will convert you currency value to USD value based on your currency exchange rate."]}),(0,t.jsxs)("div",{className:"mt-6",children:[(0,t.jsxs)("div",{className:" grid grid-cols-2",children:[(0,t.jsxs)("p",{className:"text-1xl font-medium mb-1",children:["Enable/Disable"," ",(0,t.jsx)("strong",{children:(0,t.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})})]}),(0,t.jsx)(_.Switch,{dir:"ltr",checked:U.status,onCheckedChange:()=>V("status")})]}),(0,t.jsxs)("div",{className:"my-4 grid grid-cols-2",children:[(0,t.jsxs)("p",{className:"text-1xl font-medium mb-1",children:["Enable/Disable Test Mode"," ",(0,t.jsx)("strong",{children:(0,t.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})})]}),(0,t.jsx)(_.Switch,{dir:"ltr",checked:U.is_test_mode,onCheckedChange:()=>V("is_test_mode")})]}),"iyzico"===e&&(0,t.jsxs)("div",{className:"my-4 grid grid-cols-2",children:[(0,t.jsxs)("p",{className:"text-1xl font-medium mb-1",children:["Enable/Disable Marketplace Mode"," ",(0,t.jsx)("strong",{children:(0,t.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})})]}),(0,t.jsx)(_.Switch,{dir:"ltr",checked:$,onCheckedChange:e=>R(!!e)})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-4 my-6",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"text-sm font-medium my-2",children:[(0,t.jsx)("strong",{children:(0,t.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})})," ","Logo"]}),(0,t.jsx)("div",{className:"relative flex align-start gap-4",children:(0,t.jsxs)("div",{className:"relative w-32",children:[(0,t.jsx)(h.default,{trigger:H,isMultiple:!1,onSave:e=>{O(e[0])},usageType:"gateway_settings",selectedImage:F}),F?.image_id&&(0,t.jsx)(A.default,{customClass:"absolute top-0 right-0 m-1",onClick:e=>{e.stopPropagation(),O(null)}})]})})]})}),Y.map(s=>"marketplace_mode"!==s&&("iyzico"!==e||$||"sub_merchant_key"!==s&&"store_sub_merchant_keys"!==s)?(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"text-sm font-medium mb-1 flex items-center gap-2",children:[(0,t.jsx)("span",{children:(0,j.formatLabel)(s,"_")}),(0,t.jsx)("div",{children:(0,t.jsx)(y.TooltipProvider,{children:(0,t.jsxs)(y.Tooltip,{children:[(0,t.jsx)(y.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(C.Info,{className:"w-4 text-custom-dark-blue cursor-pointer"})}),(0,t.jsx)(y.TooltipContent,{className:"bg-custom-dark-blue",children:(0,t.jsxs)("p",{className:"p-1 text-sm font-medium",children:["Please provide ",(0,j.formatLabel)(s,"_")]})})]})})})]}),(0,t.jsx)(g.Input,{id:s,...w(s),className:"app-input",placeholder:"Enter value"})]},s):null),(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsxs)("div",{className:"text-sm font-medium mb-1 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"Description"}),(0,t.jsx)("div",{children:(0,t.jsx)(y.TooltipProvider,{children:(0,t.jsxs)(y.Tooltip,{children:[(0,t.jsx)(y.TooltipTrigger,{asChild:!0,children:(0,t.jsx)(C.Info,{className:"w-4 text-custom-dark-blue cursor-pointer"})}),(0,t.jsx)(y.TooltipContent,{className:"bg-custom-dark-blue",children:(0,t.jsx)("p",{className:"p-1 text-sm font-medium",children:"Please provide description"})})]})})})]}),(0,t.jsx)(f.Textarea,{id:"description",...w("description"),className:"app-input",placeholder:"Enter value"})]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(p.SubmitButton,{IsLoading:W,AddLabel:"Update Changes"})})]})]})})})},M="cash_on_delivery",D=()=>{let e=(0,c.useAppDispatch)(),[i,n]=(0,d.useState)(M),{paymentGetwayList:m,refetch:p}=((e={})=>{let{findAll:t}=o(a.API_ENDPOINTS.PAYMENT_GETWAY),s=(0,d.useRef)(null),{data:i,isPending:n,error:c,refetch:u,isFetching:m}=(0,r.useQuery)({queryKey:[a.API_ENDPOINTS.PAYMENT_GETWAY,"list"],queryFn:()=>t(e),retry:!1,refetchOnWindowFocus:!1,...e});return(0,d.useEffect)(()=>{let e=c?.response?.data?.message;c&&e!==s.current&&(s.current=e,l.toast?.error(`${e}`,{onClose:()=>{s.current=null}}))},[c]),{paymentGetwayList:i?.data??[],error:c,isPending:n,refetch:u,isFetching:m}})({}),h=(0,d.useMemo)(()=>(Array.isArray(m)?m:Array.isArray(m?.gateways)?m.gateways:Array.isArray(m?.paymentGateways)?m.paymentGateways:[]).map(e=>({id:String(e?.slug??""),label:String(e?.name??e?.slug??"").trim(),status:!!e?.status,is_test_mode:!!e?.is_test_mode})).filter(e=>e.id.length>0),[m]);(0,d.useEffect)(()=>{!h.length||h.some(e=>e.id===i)||n(h[0].id)},[h,i]);let x=i||h[0]?.id||M,{paymentgetway:g,refetch:_,isFetching:f,isPending:y,error:v}=(e=>{let{find:t}=o(a.API_ENDPOINTS.PAYMENT_GETWAY),s=(0,d.useRef)(null),{data:i,isPending:n,error:c,refetch:u,isFetching:m}=(0,r.useQuery)({queryKey:[a.API_ENDPOINTS.PAYMENT_GETWAY+"/"+e],queryFn:()=>t(e),retry:!1,refetchOnWindowFocus:!1});return(0,d.useEffect)(()=>{let e=c?.response?.data?.message;c&&e!==s.current&&(s.current=e,l.toast?.error(`${e}`,{onClose:()=>{s.current=null}}))},[c]),{paymentgetway:i?.data.gateways??{},error:c,isPending:n,refetch:u,isFetching:m}})(x);return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-0 md:gap-5",children:[(0,t.jsx)("div",{className:"col-span-1",children:(0,t.jsx)(s.Card,{className:"sticky inset-x-0 top-24 left-0 mt-4",children:(0,t.jsx)(s.CardContent,{className:"p-2 md:p-4",children:h.map(s=>(0,t.jsx)("div",{onClick:()=>{n(s.id),e((0,u.setRefetch)(!0))},className:`cursor-pointer my-2 rounded p-2 ${x===s.id?"bg-blue-500 text-white":""} ${x!==s.id?s.status?"bg-blue-50 text-blue-500":"bg-gray-100 text-gray-500":""}`,children:(0,t.jsxs)("button",{className:"text-sm font-semibold text-start",children:[s.label,s.status?s.is_test_mode?" (Test)":" (Canli)":" (Pasif)"]})},s.id))})})}),(0,t.jsx)(s.Card,{className:"mt-4 col-span-7 min-h-[calc(100vh-74px)]",children:(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(I,{paymentgetway:g,refetch:_,refetchList:p,isPending:y,getwayname:x,isFetching:f,error:v})})})]})};e.s(["default",0,()=>{let e=(0,E.useTranslations)();return(0,t.jsxs)("div",{children:[(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"flex flex-col md:flex-row gap-4  justify-between p-2 md:p-4",children:(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-lg md:text-2xl font-semibold text-blue-500 flex items-center gap-2",children:e("label.payment_settings")})})})}),(0,t.jsx)(D,{})]})}],383595)}]);