(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,173200,e=>{"use strict";var t=e.i(843476),a=e.i(645847);e.i(614271);var s=e.i(519455),l=e.i(515288),i=e.i(699375),r=e.i(602904),n=e.i(954616),o=e.i(266027),u=e.i(170319),c=e.i(837706);let d=()=>(0,c.useBaseService)(r.API_ENDPOINTS.ADMIN_OTP_LOGIN_STATUS_UPDATE);var m=e.i(861745),_=e.i(948148),x=e.i(271645);e.i(12138);var p=e.i(526298),b=e.i(632814),h=e.i(793479);let g=[{label:"1 Minute",value:"1"},{label:"2 Minutes",value:"2"},{label:"3 Minutes",value:"3"},{label:"4 Minutes",value:"4"},{label:"5 Minutes",value:"5"}],y=({trigger:e,refetch:a,row:s})=>{let l=(0,_.useTranslations)(),i="string"==typeof s?.credentials?JSON.parse(s.credentials):s?.credentials||{},{mutate:o}=(()=>{let{create:e}=(0,c.useBaseService)(r.API_ENDPOINTS.ADMIN_SMS_PROVIDER_SETTINGS_UPDATE);return(0,n.useMutation)({mutationFn:t=>e(t),mutationKey:[r.API_ENDPOINTS.ADMIN_SMS_PROVIDER_STATUS_UPDATE],onSuccess:async e=>{u.toast.success(e?.data?.message)},onError:async e=>{let t=e?.response?.data;t&&"object"==typeof t?Object.entries(t).forEach(([e,t])=>{Array.isArray(t)?t.forEach(e=>u.toast.error(e)):"string"==typeof t&&u.toast.error(t)}):u.toast.error(t?.message)}})})(),[d,m]=(0,x.useState)(!1),[y,N]=(0,x.useState)(!1),[S,j]=(0,x.useState)(!1),[v,f]=(0,x.useState)(String(s?.expire_time)),[w,T]=(0,x.useState)({twilio_sid:i?.twilio_sid??"",twilio_auth_key:i?.twilio_auth_key??"",twilio_number:i?.twilio_number??""}),[I,A]=(0,x.useState)({nexmo_api_key:i?.nexmo_api_key??"",nexmo_api_secret:i?.nexmo_api_secret??""});return(0,t.jsx)(b.AppModal,{trigger:e,actionButtonLabel:l("button.update"),IsLoading:d,onSave:()=>{m(!0);let e="twilio"===s.slug?{twilio_sid:w.twilio_sid,twilio_auth_key:w.twilio_auth_key,twilio_number:w.twilio_number}:{nexmo_api_key:I.nexmo_api_key,nexmo_api_secret:I.nexmo_api_secret};o({...{name:s.slug,expire_time:v,credentials:e}},{onSuccess:()=>{a(),m(!1),N(!1)},onError:()=>{m(!1)}})},customClass:"inset-x-30p top-[150px] md:top-[200px] lg:top-[200px]",isOpen:y,onOpenChange:N,smallModal:!0,children:(0,t.jsxs)("div",{className:"text-start",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold uppercase text-blue-500 my-4",children:s?.name}),s?.slug==="twilio"&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-white mb-1",children:l("label.twilio_sid")}),(0,t.jsx)(h.Input,{type:"text",value:w.twilio_sid,onChange:e=>T(t=>({...t,twilio_sid:e.target.value})),className:"app-input mb-4",placeholder:"Enter Twilio SID"}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-white mb-1",children:l("label.twilio_auth_key")}),(0,t.jsx)(h.Input,{type:"text",value:w.twilio_auth_key,onChange:e=>T(t=>({...t,twilio_auth_key:e.target.value})),className:"app-input mb-4",placeholder:"Enter Twilio Auth Number"}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-white mb-1",children:l("label.twilio_auth_number")}),(0,t.jsx)(h.Input,{type:"text",value:w.twilio_number,onChange:e=>T(t=>({...t,twilio_number:e.target.value})),className:"app-input mb-4",placeholder:"Enter Twilio Auth token"})]}),s?.slug==="nexmo"&&(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-white mb-1",children:l("label.api_key")}),(0,t.jsx)(h.Input,{type:"text",value:I.nexmo_api_key,onChange:e=>A(t=>({...t,nexmo_api_key:e.target.value})),className:"app-input mb-4",placeholder:"Enter Nexmo Key"}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-white mb-1",children:l("label.api_secret")}),(0,t.jsx)(h.Input,{type:"text",value:I.nexmo_api_secret,onChange:e=>A(t=>({...t,nexmo_api_secret:e.target.value})),className:"app-input mb-4",placeholder:"Enter Nexmo Secret"})]}),(0,t.jsxs)("div",{className:`transition-all duration-200 ${S?"min-h-[320px]":"min-h-[100px]"}`,children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-white my-1",children:l("label.otp_expire_time")}),(0,t.jsx)(p.AppSelect,{placeholder:l("label.otp_expire_time"),value:String(v),onSelect:e=>{f("none"===e?"":String(e))},groups:g,hideNone:!0,onOpenChange:j})]})]})})};var N=e.i(522016);let S=()=>{let e=(0,_.useTranslations)(),p=(0,m.useLocale)(),{SmsProviderSettingsList:b,refetch:h}=(e=>{let{findAll:t}=(0,c.useBaseService)(r.API_ENDPOINTS.ADMIN_SMS_PROVIDER_SETTINGS),{data:a,isPending:s,error:l,refetch:i,isFetching:n}=(0,o.useQuery)({queryKey:[r.API_ENDPOINTS.ADMIN_SMS_PROVIDER_SETTINGS],queryFn:()=>t(e),...e});return{SmsProviderSettingsList:a?.data??{},error:l,isPending:s,refetch:i,isFetching:n}})({language:p}),g=(0,x.useMemo)(()=>b?.data||[],[b]),{OtpLoginStatusList:S,refetch:j,isPending:v,error:f}=(e=>{let{findAll:t}=d(),{data:a,isPending:s,error:l,refetch:i,isFetching:n}=(0,o.useQuery)({queryKey:[r.API_ENDPOINTS.ADMIN_OTP_LOGIN_STATUS_UPDATE],queryFn:()=>t(e),...e});return{OtpLoginStatusList:a?.data??{},error:l,isPending:s,refetch:i,isFetching:n}})({language:p}),w=(0,x.useMemo)(()=>S||{},[S]),[T,I]=(0,x.useState)(!1),{mutate:A}=(()=>{let{create:e}=d();return(0,n.useMutation)({mutationFn:t=>e(t),mutationKey:[r.API_ENDPOINTS.ADMIN_OTP_LOGIN_STATUS_UPDATE],onSuccess:async e=>{u.toast.success(e?.data?.message)},onError:async e=>{let t=e?.response?.data;t&&"object"==typeof t?Object.entries(t).forEach(([e,t])=>{Array.isArray(t)?t.forEach(e=>u.toast.error(e)):"string"==typeof t&&u.toast.error(t)}):u.toast.error(t?.message)}})})(),{mutate:E}=(()=>{let{create:e}=(0,c.useBaseService)(r.API_ENDPOINTS.ADMIN_SMS_PROVIDER_STATUS_UPDATE);return(0,n.useMutation)({mutationFn:t=>e(t),mutationKey:[r.API_ENDPOINTS.ADMIN_SMS_PROVIDER_STATUS_UPDATE],onSuccess:async e=>{u.toast.success(e?.data?.message)},onError:async e=>{let t=e?.response?.data;t&&"object"==typeof t?Object.entries(t).forEach(([e,t])=>{Array.isArray(t)?t.forEach(e=>u.toast.error(e)):"string"==typeof t&&u.toast.error(t)}):u.toast.error(t?.message)}})})();return(0,t.jsxs)(l.Card,{className:"p-2 md:p-6 mt-6",children:[(0,t.jsxs)("div",{className:"border-b pb-8 border-slate-300 ",children:[(0,t.jsx)("p",{className:"text-lg font-semibold text-gray-700 dark:text-white",children:e("label.manage_sms_gateway")}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(a.default,{trigger:(0,t.jsxs)("div",{dir:"ltr",className:"flex items-center gap-2 cursor-pointer ",children:[(0,t.jsx)(i.Switch,{checked:w?.otp_login_enabled_disable=="on"}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-500 dark:text-white",children:`${w?.otp_login_enabled_disable=="on"?e("label.disable"):e("label.enable")} OTP`})]}),loading:T,onSave:()=>void(I(!0),A({otp_login_enabled_disable:w?.otp_login_enabled_disable=="on"?"off":"on"},{onSuccess:()=>{j(),I(!1)},onError:()=>{I(!1)}})),title:e("title.are_you_sure"),subTitle:e("sub_title.you_will_able_revert_your_decision_anytime")})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"mt-6 flex items-center gap-6 justify-start w-full",children:Array.isArray(g)&&g.length>0?g?.map((i,r)=>(0,t.jsxs)(l.Card,{className:"p-2 md:p-6 mt-6 dark:bg-gray-700",children:[(0,t.jsx)("div",{className:"w-full text-center mb-4",children:(0,t.jsx)("h1",{className:"text-2xl font-bold uppercase",children:i?.name})}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 w-full",children:[(0,t.jsx)("p",{children:e("label.you_can_learn_more_about_it_from_here")}),(0,t.jsx)(N.default,{href:`${i?.slug==="twilio"?"https://www.twilio.com/en-us":"https://ui.idp.vonage.com/ui/auth/login"}`,target:"_blank",children:(0,t.jsx)("p",{className:"hover:text-blue-500",children:"Link"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4 mt-4 w-full",children:[(0,t.jsx)(a.default,{trigger:(0,t.jsx)(s.Button,{className:`${i?.status?"rounded-full bg-blue-500 text-white hover:bg-blue-400 ":"rounded-full bg-gray-500 text-white hover:bg-gray-400 "}`,children:i?.status?e("label.activated"):e("label.deactivated")}),loading:T,onSave:()=>{var e,t;return e=i?.slug,t=i?.status,I(!0),void E({name:e,status:+!t},{onSuccess:()=>{h(),I(!1)},onError:()=>{I(!1)}})},title:e("title.update_status"),subTitle:e("sub_title.update_status")}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(y,{trigger:(0,t.jsx)(s.Button,{className:"rounded-full bg-red-500 text-white hover:bg-red-400 ",children:e("button.settings")}),refetch:h,row:i})})]})]},r)):""})})]})};e.s(["default",0,()=>{let e=(0,_.useTranslations)();return(0,t.jsxs)("div",{children:[(0,t.jsx)(l.Card,{children:(0,t.jsx)(l.CardContent,{className:"flex flex-col md:flex-row gap-4  justify-between p-2 md:p-4",children:(0,t.jsx)("div",{children:(0,t.jsx)("h1",{className:"text-lg md:text-2xl font-semibold text-blue-500  flex items-center gap-2",children:e("label.sms_gateway_settings")})})})}),(0,t.jsx)(S,{})]})}],173200)}]);