(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,817478,e=>{"use strict";var a=e.i(843476),t=e.i(769542);e.i(614271);var s=e.i(519455);e.s(["SubmitButton",0,({disabled:e,IsLoading:i,UpdateLabel:r,AddLabel:l,UpdateData:n})=>(0,a.jsx)(s.Button,{type:"submit",disabled:e||i,variant:"outline",className:"app-button",children:i?(0,a.jsx)(t.default,{size:"small"}):(0,a.jsx)("span",{children:n?`${r}`:`${l}`})})])},16260,608281,e=>{"use strict";e.i(817478);var a=e.i(843476);e.i(614271);var t=e.i(967489),s=e.i(519455),i=e.i(948148);e.s(["BulkActionBar",0,({selectedAction:e,setSelectedAction:r,selectedRows:l,originalDataLength:n,actions:o,isRequesting:d=!1,handleSelectAll:c,checkboxCustomClass:m="mx-3 md:mx-5"})=>{let u=(0,i.useTranslations)(),p=o.find(a=>a.value===e);return(0,a.jsxs)("div",{className:"relative md:absolute mt-4 md:mt-0 shadow-custom md:shadow-none p-2 md:p-0 bg-white dark:bg-[#1e293b] md:bg-transparent rounded",children:[(0,a.jsxs)("div",{className:"mx-2 flex items-center justify-center gap-2",children:[(0,a.jsxs)(t.Select,{onValueChange:r,value:e,children:[(0,a.jsx)(t.SelectTrigger,{className:"w-full md:w-[180px] border px-4 py-2 rounded app-input",children:(0,a.jsx)(t.SelectValue,{placeholder:u("place_holder.select_action")})}),(0,a.jsx)(t.SelectContent,{children:(0,a.jsxs)(t.SelectGroup,{children:[(0,a.jsx)(t.SelectItem,{value:"none",children:u("common.none")}),o.map(e=>(0,a.jsx)(t.SelectItem,{value:e.value,children:e.label},e.value))]})})]},e),(0,a.jsx)(s.Button,{variant:"outline",className:"app-button my-2",disabled:0===l.size||!p,onClick:()=>p?.onClick(),children:d?`${p?.label}...`:p?.label??u("common.apply")})]}),(0,a.jsx)("div",{className:`absolute z-50 mt-[96px] md:mt-[16px] ${m}`,children:(0,a.jsx)("input",{type:"checkbox",onChange:e=>c(e.target.checked),checked:l.size===n&&n>0})})]})}],608281),e.s([],16260)},994814,e=>{"use strict";var a=e.i(653145);let t=(e,t,s)=>{if(e&&"reportValidity"in e){let i=(0,a.get)(s,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},s=(e,a)=>{for(let s in a.fields){let i=a.fields[s];i&&i.ref&&"reportValidity"in i.ref?t(i.ref,s,e):i&&i.refs&&i.refs.forEach(a=>t(a,s,e))}},i=(e,t)=>{t.shouldUseNativeValidation&&s(e,t);let i={};for(let s in e){let l=(0,a.get)(t.fields,s),n=Object.assign(e[s]||{},{ref:l&&l.ref});if(r(t.names||Object.keys(e),s)){let e=Object.assign({},(0,a.get)(i,s));(0,a.set)(e,"root",n),(0,a.set)(i,s,e)}else(0,a.set)(i,s,n)}return i},r=(e,a)=>{let t=l(a);return e.some(e=>l(e).match(`^${t}\\.\\d+`))};function l(e){return e.replace(/\]|\[/g,"")}e.i(292135);var n=e.i(374969),o=e.i(803108);function d(e,a){try{var t=e()}catch(e){return a(e)}return t&&t.then?t.then(void 0,a):t}function c(e,t,r){if(void 0===r&&(r={}),"_def"in e&&"object"==typeof e._def&&"typeName"in e._def)return function(l,n,o){try{return Promise.resolve(d(function(){return Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](l,t)).then(function(e){return o.shouldUseNativeValidation&&s({},o),{errors:{},values:r.raw?Object.assign({},l):e}})},function(e){if(Array.isArray(null==e?void 0:e.issues))return{values:{},errors:i(function(e,t){for(var s={};e.length;){var i=e[0],r=i.code,l=i.message,n=i.path.join(".");if(!s[n])if("unionErrors"in i){var o=i.unionErrors[0].errors[0];s[n]={message:o.message,type:o.code}}else s[n]={message:l,type:r};if("unionErrors"in i&&i.unionErrors.forEach(function(a){return a.errors.forEach(function(a){return e.push(a)})}),t){var d=s[n].types,c=d&&d[i.code];s[n]=(0,a.appendErrors)(n,t,s,r,c?[].concat(c,i.message):i.message)}e.shift()}return s}(e.errors,!o.shouldUseNativeValidation&&"all"===o.criteriaMode),o)};throw e}))}catch(e){return Promise.reject(e)}};if("_zod"in e&&"object"==typeof e._zod)return function(l,c,m){try{return Promise.resolve(d(function(){return Promise.resolve(("sync"===r.mode?o.parse:o.parseAsync)(e,l,t)).then(function(e){return m.shouldUseNativeValidation&&s({},m),{errors:{},values:r.raw?Object.assign({},l):e}})},function(e){if(e instanceof n.$ZodError)return{values:{},errors:i(function(e,t){for(var s={};e.length;){var i=e[0],r=i.code,l=i.message,n=i.path.join(".");if(!s[n])if("invalid_union"===i.code&&i.errors.length>0){var o=i.errors[0][0];s[n]={message:o.message,type:o.code}}else s[n]={message:l,type:r};if("invalid_union"===i.code&&i.errors.forEach(function(a){return a.forEach(function(a){return e.push(a)})}),t){var d=s[n].types,c=d&&d[i.code];s[n]=(0,a.appendErrors)(n,t,s,r,c?[].concat(c,i.message):i.message)}e.shift()}return s}(e.issues,!m.shouldUseNativeValidation&&"all"===m.criteriaMode),m)};throw e}))}catch(e){return Promise.reject(e)}};throw Error("Invalid input: not a Zod schema")}e.s(["zodResolver",()=>c],994814)},142165,e=>{"use strict";var a=e.i(843476),t=e.i(515288),s=e.i(302747);function i({CustomClass:e=""}){return(0,a.jsx)(t.Card,{className:`mt-4 ${e}`,children:(0,a.jsxs)(t.CardContent,{className:`p-2 md:p-6 ${e}`,children:[(0,a.jsx)("div",{className:"flex gap-x-6 mb-6",children:[1,2,3].map(e=>(0,a.jsx)(s.Skeleton,{className:"h-8 w-24 rounded-md"},e))}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 w-full",children:[(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Skeleton,{className:"h-4 w-40 mb-2"}),(0,a.jsx)(s.Skeleton,{className:"h-10 w-full rounded-md"})]},t))}),(0,a.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Skeleton,{className:"h-4 w-40 mb-2"}),(0,a.jsx)(s.Skeleton,{className:"h-10 w-full rounded-md"})]},t))})]}),(0,a.jsx)("div",{className:"mt-10",children:(0,a.jsx)(s.Skeleton,{className:"h-10 w-36 rounded-md"})})]})})}e.s(["default",()=>i])},879664,e=>{"use strict";let a=(0,e.i(475254).default)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);e.s(["default",()=>a])},952571,e=>{"use strict";var a=e.i(879664);e.s(["Info",()=>a.default])},35988,e=>{"use strict";var a=e.i(843476);let t=()=>(0,a.jsx)("div",{children:(0,a.jsxs)("svg",{width:"11",height:"10",viewBox:"0 0 11 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("path",{d:"M10.25 9L6.25 5L10.25 1",stroke:"#FF5555",strokeWidth:"0.833333",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsx)("path",{d:"M0.5 1L4.5 5L0.5 9",stroke:"#FF5555",strokeWidth:"0.833333",strokeLinecap:"round",strokeLinejoin:"round"})]})});e.s(["default",0,({onClick:e,customClass:s})=>(0,a.jsx)("div",{onClick:e,className:`bg-[#CFCFCF70] hover:bg-gray-400 p-2 rounded cursor-pointer ${s}`,children:(0,a.jsx)(t,{})})],35988)},373765,e=>{"use strict";let a=(0,e.i(475254).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>a])},406321,e=>{"use strict";let a=(0,e.i(475254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["default",()=>a])},990633,e=>{"use strict";let a=(0,e.i(475254).default)("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);e.s(["default",()=>a])},555231,e=>{"use strict";var a=e.i(990633);e.s(["CloudUploadIcon",()=>a.default])},100391,e=>{"use strict";var a=e.i(602904),t=e.i(954616),s=e.i(266027),i=e.i(170319),r=e.i(313430),l=e.i(494881),n=e.i(581949),o=e.i(117595),d=e.i(861745),c=e.i(271645),m=e.i(837706);e.s(["useAltChange",0,()=>{let{create:e}=(0,m.useBaseService)(a.API_ENDPOINTS.PRODUCT_ALT_CHANGE);return(0,t.useMutation)({mutationFn:a=>e(a),mutationKey:[a.API_ENDPOINTS.PRODUCT_ALT_CHANGE],onSuccess:async e=>{i.toast.success(e?.data?.message)},onError:async e=>{let a=e?.response?.data;i.toast.error(a?.message)}})},"useFileUploadService",0,()=>{let e=(0,d.useLocale)(),a=(0,c.useMemo)(()=>{let a=n.default.create({baseURL:r.env.NEXT_PUBLIC_REST_API_ENDPOINT,timeout:5e6,headers:{"Content-Type":"multipart/form-data"}});return a.interceptors.request.use(a=>{let t=o.default.get(l.AUTH_TOKEN_KEY);return a.headers={...a.headers,Authorization:`Bearer ${t||""}`,"X-localization":e},a}),a},[e]);return{uploadFile:async(e,t,s,i)=>{let r=new FormData;r.append("file",e),r.append("store_id",s),r.append("usage_type",i);try{return(await a.post(t,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(e){throw e}}}},"useMediaDelete",0,()=>{let{create:e}=(0,m.useBaseService)(a.API_ENDPOINTS.PRODUCT_MEDIA_DELETE);return(0,t.useMutation)({mutationFn:a=>e(a),mutationKey:[a.API_ENDPOINTS.PRODUCT_MEDIA_DELETE],onSuccess:async e=>{i.toast.success(e?.data?.message)},onError:async e=>{let a=e?.response?.data;i.toast.error(a?.message)}})},"useMediaLibraryQuery",0,e=>{let{findAll:t}=(0,m.useBaseService)(a.API_ENDPOINTS.PRODUCT_MEDIA_LIBRARY),{data:i,isPending:r,error:l,refetch:n,isFetching:o}=(0,s.useQuery)({queryKey:[a.API_ENDPOINTS.PRODUCT_MEDIA_LIBRARY],queryFn:()=>t(e),...e});return{mediaLibrary:i?.data??{},error:l,isPending:r,refetch:n,isFetching:o}}],100391)},720126,e=>{"use strict";var a=e.i(843476);e.s(["default",0,()=>(0,a.jsx)("div",{children:(0,a.jsxs)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("g",{clipPath:"url(#clip0_5364_62366)",children:(0,a.jsx)("path",{d:"M20.35 10.04C19.67 6.59 16.64 4 13 4C10.11 4 7.6 5.64 6.35 8.04C3.34 8.36 1 10.91 1 14C1 17.31 3.69 20 7 20H20C22.76 20 25 17.76 25 15C25 12.36 22.95 10.22 20.35 10.04ZM20 18H7C4.79 18 3 16.21 3 14C3 11.95 4.53 10.24 6.56 10.03L7.63 9.92L8.13 8.97C9.08 7.14 10.94 6 13 6C15.62 6 17.88 7.86 18.39 10.43L18.69 11.93L20.22 12.04C21.78 12.14 23 13.45 23 15C23 16.65 21.65 18 20 18ZM9 13H11.55V16H14.45V13H17L13 9L9 13Z",fill:"#1849D6"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_5364_62366",children:(0,a.jsx)("rect",{width:"23.84",height:"24",fill:"white",transform:"translate(0.580078)"})})})]})})])},893742,e=>{"use strict";var a=e.i(843476),t=e.i(546266),s=e.i(769542);e.i(614271);var i=e.i(519455),r=e.i(515288),l=e.i(793479),n=e.i(677572),o=e.i(225960),d=e.i(100391),c=e.i(107649),m=e.i(678745),m=m,u=e.i(373765),u=u,p=e.i(657688),h=e.i(618566),x=e.i(271645),g=e.i(170319),_=e.i(632814),f=e.i(948148),y=e.i(536719),b=e.i(602904);let v=["JPG","JPEG","PNG","GIF","webp"];e.s(["default",0,({onSave:e,isMultiple:j,trigger:N,buttonTitle:w="Select Photo",usageType:k,selectedImage:z})=>{let P,A=(0,f.useTranslations)(),[C,S]=(0,x.useState)([]),[T,E]=(0,x.useState)([]),[I,L]=(0,x.useState)(),[M,D]=(0,x.useState)(null),[F,O]=(0,x.useState)([]),[B,U]=(0,x.useState)(!1);(0,h.usePathname)().split("/")[1];let[R,$]=(0,x.useState)("Media Library"),[G,Y]=(0,x.useState)(0),[V,K]=(0,x.useState)([]),[H,W]=(0,x.useState)([]),[q,Z]=(0,x.useState)(!1),[Q,J]=(0,x.useState)(!1),X=(0,y.useAppSelector)(e=>e.store.selectedStore),ee=X?.id??"";(0,x.useEffect)(()=>{B&&z&&(E([z]),L(z),K(e=>e.some(e=>e.image_id==z.image_id)?e:[z,...e]))},[B,z]);let{mediaLibrary:ea,refetch:et,isPending:es}=(0,d.useMediaLibraryQuery)({offset:G,store_id:ee});(0,x.useEffect)(()=>{if(ea&&"images"in ea){let e=ea.images;z&&!e.find(e=>e.image_id==z.image_id)&&(e=[z,...e]),0===H.length&&(W(e),K(e))}},[ea,H.length,z]),(0,x.useEffect)(()=>{Y(V.length)},[V]);let ei=async()=>{J(!0);try{let e=await et(),a=e?.data?.data?.images||[];a.length>0?K(e=>{let t=new Set(e.map(e=>e.image_id)),s=a.filter(e=>!t.has(e.image_id));return[...e,...s]}):g.toast.info("No new data available.")}catch(e){g.toast.error("Failed to load more images")}finally{J(!1)}},{uploadFile:er}=(0,d.useFileUploadService)(),el=async e=>{var a;let t=new FileReader;t.onload=a=>{let t=document.createElement("img");t.src=a.target?.result,t.onload=()=>{let{width:a,height:s}=t;D(e)}},t.readAsDataURL(e);let s={id:`${Date.now()}-${e.name}`,file:e,name:e.name,size:(a=e.size)<1024?`${a} B`:a<1048576?`${(a/1024).toFixed(1)} KB`:`${(a/1048576).toFixed(1)} MB`,url:URL.createObjectURL(e),isLoading:!0,isUploaded:!1};if(S(e=>[...e,s]),O(e=>[...e,s]),e)try{let a=await er(e,b.API_ENDPOINTS.PRODUCT_MEDIA_ADD,ee,k);O(e=>e.map(e=>e.id===s.id?{...e,isLoading:!1,isUploaded:!0}:e)),S(e=>e.map(e=>e.id===s.id?{...e,isLoading:!1,isUploaded:!0}:e)),g.toast.success(a?.message),await et(),Y(0)}catch(e){O(e=>e.map(e=>e.id===s.id?{...e,isLoading:!1}:e)),S(e=>e.map(e=>e.id===s.id?{...e,isLoading:!1}:e)),g.toast.error("File upload failed")}},{mutate:en}=(0,d.useMediaDelete)(),eo=e=>{en({image_id:e},{onSuccess:()=>{K(a=>a.filter(a=>a.image_id!==e)),E(a=>a.filter(a=>a.image_id!==e)),I?.image_id===e&&L(void 0),et()},onError:()=>{g.toast.error("Failed to delete image")}})},{mutate:ed}=(0,d.useAltChange)();return(0,a.jsx)(_.AppModal,{trigger:N,disable:!I,actionButtonLabel:w,customClass:"inset-x-0p md:inset-x-5p xl:inset-x-17p top-[100px] bg-white",onSave:()=>{e(T.length>0?T:I?[I]:[]),U(!1)},isOpen:B,onOpenChange:U,cancelButtonLabel:A("button.close"),hideX:!0,children:(0,a.jsx)("div",{children:(0,a.jsxs)(n.Tabs,{value:R,onValueChange:e=>{$(e),"Media Library"===e&&(et(),ei())},children:[(0,a.jsxs)(n.TabsList,{className:"text-left bg-white",children:[(0,a.jsx)(n.TabsTrigger,{value:"Upload Files",children:(0,a.jsx)("div",{className:"text-start",children:(0,a.jsx)("h1",{children:A("label.upload_image")})})}),(0,a.jsx)(n.TabsTrigger,{value:"Media Library",children:(0,a.jsx)("div",{className:"text-start",children:(0,a.jsx)("h1",{children:A("label.media_library")})})})]}),(0,a.jsx)(n.TabsContent,{value:"Upload Files",className:"h-[500px] overflow-y-auto lg:overflow-hidden custom-scrollbar",children:(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"relative overflow-y-auto p-4 border-2 border-dashed border-slate-300 w-full rounded custom-scrollbar h-[480px]",children:[(0,a.jsx)("div",{className:"absolute flex flex-wrap w-auto gap-4",children:Array.isArray(F)&&F.length>0?F.map(e=>(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"relative h-32 w-32 rounded group",children:[(0,a.jsx)(p.default,{loader:o.default,src:e.url,alt:e.file.name,fill:!0,sizes:"128px",unoptimized:!0,className:"h-full w-full rounded"}),e.isLoading?(0,a.jsx)("div",{className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow",children:(0,a.jsx)("div",{className:"h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e.isUploaded?(0,a.jsx)("div",{className:"absolute top-1 right-1 bg-white rounded-full p-1 shadow",children:(0,a.jsx)(c.CheckCircleIcon,{className:"h-4 w-4 text-blue-500 animate-pulse"})}):null,(0,a.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-end p-2",children:[(0,a.jsx)("div",{className:"text-white text-xs truncate",title:e.file.name,children:e.file.name}),(0,a.jsxs)("div",{className:"text-white text-xs",children:[(e.file.size/1024).toFixed(2)," KB"]})]})]})},e.id)):""}),(0,a.jsx)(t.default,{handleFileChange:el,fileTypes:v,file:F})]})})})}),(0,a.jsx)(n.TabsContent,{value:"Media Library",className:"h-[500px] overflow-y-auto lg:overflow-hidden custom-scrollbar",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 px-2",children:[(0,a.jsx)("div",{className:"w-full md:w-[81%] flex flex-col rounded-lg  h-[500px]",children:(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 border border-slate-300 rounded custom-scrollbar ",children:[(0,a.jsx)("div",{className:"flex flex-wrap gap-4 ",children:Array.isArray(V)&&V.length>0?V.map((e,t)=>{let s;return(0,a.jsx)(r.Card,{onClick:()=>{E(a=>{let t=a.find(a=>a.image_id===e.image_id)?a.filter(a=>a.image_id!==e.image_id):j?[...a,e]:[e];return L(t[t.length-1]),t})},className:`${T.some(a=>a.image_id==e.image_id)?"border border-blue-500 shadow-lg text-white":"text-gray-500 dark:text-white"}rounded cursor-pointer`,children:(0,a.jsxs)("div",{className:`${T.some(a=>a.image_id==e.image_id)?"border-2 border-blue-500 text-white rounded-md":"text-gray-500 dark:text-white"} cursor-pointer relative h-32 w-32 rounded-md group`,children:[(s=(0,o.resolveImageSrc)(e.img_url||e.url||"/images/no-image.png"))?(0,a.jsx)(p.default,{loader:o.default,src:s,alt:e.name||"image",fill:!0,sizes:"128px",unoptimized:!0,className:"h-full w-full rounded"}):null,(0,a.jsx)("div",{className:`${T.some(a=>a.image_id==e.image_id)?"absolute z-10 flex top-0 left-0 bg-blue-500 text-white":"hidden"} `,children:(0,a.jsx)("button",{className:"rounded-full p-1",onClick:a=>{a.stopPropagation(),eo(e.image_id)},children:(0,a.jsx)(m.default,{className:"h-4 w-4 "})})}),(0,a.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex flex-col justify-end p-2",children:[(0,a.jsx)("div",{className:"absolute top-1 right-1 rounded-full  shadow bg-white hover:bg-red-500 text-red-500 hover:text-white",children:(0,a.jsx)("button",{className:"rounded-full  p-1",onClick:a=>{a.stopPropagation(),eo(e.image_id)},children:(0,a.jsx)(u.default,{className:"h-4 w-4 "})})}),(0,a.jsx)("div",{className:"text-white text-xs truncate",title:e?.file?.name,children:e?.file?.name}),(0,a.jsx)("div",{className:"text-white text-xs",children:e?.file?.size?`${(e?.file?.size/1024).toFixed(2)} KB`:""})]})]})},e.image_id||e.id||`${e.name}-${t}`)}):""}),V.length>0&&(0,a.jsx)("div",{className:"text-center mt-4",children:(0,a.jsx)(i.Button,{onClick:ei,disabled:Q,variant:"outline",className:"app-button",children:Q?"Loading...":"Load More"})}),es&&(0,a.jsx)("div",{children:(0,a.jsx)(s.default,{customClass:"mt-32",size:"large"})}),0===V.length&&!es&&(0,a.jsx)("div",{className:"flex text-center items-center justify-center h-full",children:(0,a.jsx)("h2",{className:" text-center text-sm font-semibold text-gray-700",children:"No Photo Uploaded Yet."})})]})}),(0,a.jsxs)("div",{className:"w-full md:w-[18%] border border-slate-300 rounded h-[500px]",children:[I&&(0,a.jsxs)("div",{className:"p-2",children:[(0,a.jsx)("h2",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Preview Selected Images:"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"relative w-full h-32 rounded shadow-xl border",children:(P=(0,o.resolveImageSrc)(I.img_url||I.url||"/images/no-image.png"))?(0,a.jsx)(p.default,{loader:o.default,src:P,alt:I.name||"image",fill:!0,unoptimized:!0,className:"w-full h-full"}):null},I.id),(0,a.jsxs)("div",{className:"mt-4 text-sm overflow-x-visible",children:[(0,a.jsx)("p",{className:"my-2 truncate overflow-hidden whitespace-nowrap max-w-[150px]",children:I.name}),(0,a.jsx)("p",{className:"my-2",children:I.size}),(0,a.jsx)("p",{className:"my-2",children:I.upload_at}),(0,a.jsx)("p",{className:"my-2",children:I.dimensions}),(0,a.jsx)(l.Input,{type:"text",id:"alt",className:"app-input",placeholder:"Enter value",value:I.alt??"",onChange:e=>{I&&L({...I,alt:e.target.value})}}),(0,a.jsxs)(i.Button,{onClick:()=>{var e,a;return e=I.image_id,a=I.alt,void(Z(!0),ed({image_id:e,alt:a},{onSuccess:()=>{et()},onError:()=>{g.toast.error("Failed to update ALT text")},onSettled:()=>{Z(!1)}}))},variant:"outline",className:"mt-2 app-button",disabled:q,children:[q?"Loading...":"Update"," "]})]})]})]}),!I&&(0,a.jsx)("div",{className:"p-2 flex text-center items-center justify-center h-full",children:(0,a.jsx)("h2",{className:"text-center text-sm font-semibold text-gray-700 mb-2",children:"No Photo Selected Yet."})})]})]})})]})})})}],893742)},383595,e=>{"use strict";var a=e.i(843476);e.i(614271);var t=e.i(515288),s=e.i(602904),i=e.i(954616),r=e.i(266027),l=e.i(170319),n=e.i(837706);let o=e=>(0,n.useBaseService)(e);var d=e.i(271645),c=e.i(536719),m=e.i(560989),u=e.i(948148),p=e.i(720126);e.i(16260);var h=e.i(817478),x=e.i(893742),g=e.i(142165),_=e.i(793479),f=e.i(699375),y=e.i(624687),b=e.i(746798),v=e.i(225960),j=e.i(975157),N=e.i(681307);let w={currency_settings:N.z.string().optional(),com_site_global_currency:N.z.string().optional(),com_site_enable_disable_decimal_point:N.z.string().optional(),com_site_space_between_amount_and_symbol:N.z.string().optional(),com_site_comma_form_adjustment_amount:N.z.string().optional(),com_site_currency_symbol_position:N.z.string().optional(),com_site_default_currency_to_usd_exchange_rate:N.z.string().optional(),com_site_default_currency_to_myr_exchange_rate:N.z.string().optional(),com_site_default_currency_to_brl_exchange_rate:N.z.string().optional(),com_site_default_currency_to_zar_exchange_rate:N.z.string().optional(),com_site_default_currency_to_ngn_exchange_rate:N.z.string().optional()};N.z.object({...w});let k={gateway_name:N.z.string().optional(),description:N.z.string().optional(),paypal_sandbox_client_id:N.z.string().optional(),paypal_sandbox_client_secret:N.z.string().optional(),paypal_sandbox_client_app_id:N.z.string().optional(),paypal_live_client_id:N.z.string().optional(),paypal_live_client_secret:N.z.string().optional(),paypal_live_app_id:N.z.string().optional(),stripe_public_key:N.z.string().optional(),stripe_secret_key:N.z.string().optional(),stripe_webhook_secret:N.z.string().optional(),stripe_success_url:N.z.string().optional(),stripe_cancel_url:N.z.string().optional(),paytm_merchant_key:N.z.string().optional(),paytm_merchant_mid:N.z.string().optional(),paytm_merchant_website:N.z.string().optional(),paytm_channel:N.z.string().optional(),paytm_industry_type:N.z.string().optional(),paystack_public_key:N.z.string().optional(),paystack_secret_key:N.z.string().optional(),paystack_merchant_email:N.z.string().optional(),mollie_public_key:N.z.string().optional(),zitopay_username:N.z.string().optional(),paytabs_profile_id:N.z.string().optional(),paytabs_region:N.z.string().optional(),paytabs_server_key:N.z.string().optional(),billplz_key:N.z.string().optional(),billplz_version:N.z.string().optional(),billplz_x_signature:N.z.string().optional(),billplz_collection_name:N.z.string().optional(),flutterwave_public_key:N.z.string().optional(),flutterwave_secret_key:N.z.string().optional(),flutterwave_secret_hash:N.z.string().optional(),manual_payment_name:N.z.string().optional()},z=N.z.object({...k}).passthrough();var P=e.i(994814),A=e.i(952571),C=e.i(657688),S=e.i(618566),T=e.i(653145),E=e.i(35988);let I={iyzico:["api_key","secret_key","marketplace_mode","sub_merchant_key","store_sub_merchant_keys"]},L={iyzico:{api_key:"iyzico Merchant Portal → Ayarlar → Firma Ayarları → API Anahtarları → API Anahtarı",secret_key:"iyzico Merchant Portal → Ayarlar → Firma Ayarları → API Anahtarları → Güvenlik Anahtarı",sub_merchant_key:"iyzico Merchant Portal → Alt Üye İşyerleri sayfasından mağazanıza ait 'Alt Üye İşyeri Anahtarı' değerini buraya girin. Marketplace Mode açıkken tüm ödemeler için varsayılan sub-merchant key olarak kullanılır.",store_sub_merchant_keys:'Her mağazanın kendi iyzico sub-merchant hesabı varsa buraya JSON formatında girin. Örnek: {"5": "sub_merchant_key_1", "12": "sub_merchant_key_2"}. Anahtar olarak admin paneldeki Store ID kullanılır. Tek sub-merchant kullanıyorsanız boş bırakın.'},paytr:{merchant_id:"PayTR Merchant Panel → Hesap Bilgileri bölümünden Merchant ID değerini buraya girin.",merchant_key:"PayTR Merchant Panel → Hesap Bilgileri bölümünden Merchant Key değerini buraya girin.",merchant_salt:"PayTR Merchant Panel → Hesap Bilgileri bölümünden Merchant Salt değerini buraya girin."},moka:{dealer_code:"Moka Pos tarafından size verilen Dealer Code (bayi kodu) değerini buraya girin.",username:"Moka Pos API erişimi için kullandığınız kullanıcı adını buraya girin.",password:"Moka Pos API erişimi için kullandığınız şifreyi buraya girin."},ziraatpay:{merchant_id:"ZiraatPay tarafından size verilen Merchant ID (üye işyeri numarası) değerini buraya girin.",terminal_id:"ZiraatPay tarafından atanan Terminal ID değerini buraya girin.",secret_key:"ZiraatPay API erişimi için kullanılan Secret Key değerini buraya girin."}},M=({getwayname:e="cash_on_delivery",paymentgetway:r,refetch:o,refetchList:c,isPending:m,error:N})=>{let w=(0,S.usePathname)().split("/")[1],{register:k,setValue:M,handleSubmit:D}=(0,T.useForm)({resolver:(0,P.zodResolver)(z)}),F=(0,u.useTranslations)(),[O,B]=(0,d.useState)(null),[U,R]=(0,d.useState)({status:!1,is_test_mode:!1}),[$,G]=(0,d.useState)(!1),Y=(0,d.useMemo)(()=>r||{},[r]),V=(0,d.useMemo)(()=>{let a=Y?.auth_credentials;return Array.from(new Set([...a&&"object"==typeof a?Object.keys(a):[],...I[e]??[]]))},[Y?.auth_credentials,e]);(0,d.useEffect)(()=>{M("gateway_name",e??""),M("description",Y?.description??""),V.forEach(e=>{M(e,Y?.auth_credentials?.[e]??"")}),B({image_id:Y?.image||"",img_url:Y?.image_url||"",name:"Logo"}),R({status:!!Y?.status,is_test_mode:!!Y?.is_test_mode});let a=Y?.auth_credentials?.marketplace_mode;G("boolean"==typeof a?a:["1","true","yes","on"].includes(String(a??"").trim().toLowerCase()))},[V,Y,e,M]);let K=e=>{R(a=>({...a,[e]:!a[e]}))},{mutate:H,isPending:W}=(e=>{let a,{create:t}=(a=s.API_ENDPOINTS.PAYMENT_GETWAY+"/"+e,(0,n.useBaseService)(a));return(0,i.useMutation)({mutationFn:e=>t(e),mutationKey:[s.API_ENDPOINTS.PAYMENT_GETWAY+"/"+e],onSuccess:async e=>{e?.data?l.toast.success(e?.data?.message):l.toast.error(e?.data?.message)},onError:async e=>{let a=e?.response?.data;l.toast.error(a?.message)}})})(e),q=async a=>{let t=Object.fromEntries(V.filter(e=>"marketplace_mode"!==e).map(e=>[e,a?.[e]??""]));"iyzico"===e&&(t.marketplace_mode=$,$||(t.sub_merchant_key=null,t.store_sub_merchant_keys=null));let s=O?.image_id?String(O.image_id):void 0;return H({id:Y?.id?Y.id:0,name:Y?.name||(0,j.formatLabel)(e||"","_"),description:a.description,auth_credentials:V.length?t:null,status:U.status,is_test_mode:U.is_test_mode,image:s},{onSuccess:()=>{o(),c?.()}})};(0,d.useEffect)(()=>{m||N||o()},[N,m,o]);let Z=(0,a.jsx)("div",{className:"hover:cursor-pointer",children:O?.img_url?(0,a.jsxs)("div",{className:"relative w-32 h-24 group",children:[(0,a.jsx)(C.default,{loader:v.default,src:O.img_url,alt:O.name,fill:!0,sizes:"128px",className:"w-full h-full border dark:border-gray-500 rounded p-4"}),(0,a.jsxs)("div",{className:" absolute bottom-0 left-1/2 -translate-x-1/2 bg-[#FFFFFFE5] border-l border-r border-b w-full rounded-b opacity-0 group-hover:opacity-90 transition-opacity duration-300 flex flex-col items-center justify-center",children:[(0,a.jsx)(p.default,{}),(0,a.jsx)("p",{className:"text-xs font-bold text-red-500 p-1",children:F("common.change_image")})]})]}):(0,a.jsx)("div",{className:" w-32 h-24 border-2 border-dashed border-blue-500  text-center rounded-lg cursor-pointer hover:bg-blue-50 transition-colors",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center mt-2",children:[(0,a.jsx)(p.default,{}),(0,a.jsx)("p",{className:"mt-2 text-blue-500 text-xs font-medium",children:F("common.drag_and_drop")})]})})});return(0,a.jsx)("div",{children:m?(0,a.jsx)(g.default,{CustomClass:"!p-2 !shadow-none"}):(0,a.jsx)("form",{onSubmit:D(q),children:(0,a.jsxs)(t.CardContent,{className:"p-2 md:p-4",children:[(0,a.jsx)("p",{className:"text-lg md:text-2xl font-medium mb-4",children:F("label.payment_gateway")}),(0,a.jsxs)("div",{dir:"ar"===w?"rtl":"ltr",children:[(0,a.jsxs)("div",{className:"bg-gray-200 dark:bg-gray-700 p-4 border-l-8 border-blue-600",children:[F("common.payment_gateway_currency_note_prefix")," ",(0,a.jsx)("strong",{children:(0,a.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})}),F("common.payment_gateway_currency_note_suffix")]}),(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("div",{className:" grid grid-cols-2",children:[(0,a.jsxs)("p",{className:"text-1xl font-medium mb-1",children:[F("common.enable_disable")," ",(0,a.jsx)("strong",{children:(0,a.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})})]}),(0,a.jsx)(f.Switch,{dir:"ltr",checked:U.status,onCheckedChange:()=>K("status")})]}),(0,a.jsxs)("div",{className:"my-4 grid grid-cols-2",children:[(0,a.jsxs)("p",{className:"text-1xl font-medium mb-1",children:[F("label.enable_disable_test_mode")," ",(0,a.jsx)("strong",{children:(0,a.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})})]}),(0,a.jsx)(f.Switch,{dir:"ltr",checked:U.is_test_mode,onCheckedChange:()=>K("is_test_mode")})]}),"iyzico"===e&&(0,a.jsxs)("div",{className:"my-4 grid grid-cols-2",children:[(0,a.jsxs)("p",{className:"text-1xl font-medium mb-1",children:[F("label.enable_disable_marketplace_mode")," ",(0,a.jsx)("strong",{children:(0,a.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})})]}),(0,a.jsx)(f.Switch,{dir:"ltr",checked:$,onCheckedChange:e=>G(!!e)})]})]}),(0,a.jsx)("div",{className:"grid grid-cols-4 gap-4 my-6",children:(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium my-2",children:[(0,a.jsx)("strong",{children:(0,a.jsx)("i",{className:"capitalize",children:(0,j.formatLabel)(e||"","_")})})," ",F("label.logo")]}),(0,a.jsx)("div",{className:"relative flex align-start gap-4",children:(0,a.jsxs)("div",{className:"relative w-32",children:[(0,a.jsx)(x.default,{trigger:Z,isMultiple:!1,onSave:e=>{B(e[0])},usageType:"gateway_settings",selectedImage:O}),O?.image_id&&(0,a.jsx)(E.default,{customClass:"absolute top-0 right-0 m-1",onClick:e=>{e.stopPropagation(),B(null)}})]})})]})}),V.map(t=>"marketplace_mode"!==t&&("iyzico"!==e||$||"sub_merchant_key"!==t&&"store_sub_merchant_keys"!==t)?(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium mb-1 flex items-center gap-2",children:[(0,a.jsx)("span",{children:(0,j.formatLabel)(t,"_")}),(0,a.jsx)("div",{children:(0,a.jsx)(b.TooltipProvider,{children:(0,a.jsxs)(b.Tooltip,{children:[(0,a.jsx)(b.TooltipTrigger,{asChild:!0,children:(0,a.jsx)(A.Info,{className:"w-4 text-custom-dark-blue cursor-pointer"})}),(0,a.jsx)(b.TooltipContent,{className:"bg-custom-dark-blue max-w-xs",children:(0,a.jsx)("p",{className:"p-1 text-sm font-medium",children:L[e]?.[t]??F("common.please_provide_dynamic",{field:(0,j.formatLabel)(t,"_")})})})]})})})]}),"store_sub_merchant_keys"===t?(0,a.jsx)(y.Textarea,{id:t,...k(t),className:"app-input font-mono text-sm",rows:4,placeholder:'{"store_id_1": "sub_merchant_key_1", "store_id_2": "sub_merchant_key_2"}'}):(0,a.jsx)(_.Input,{id:t,...k(t),className:"app-input",placeholder:F("place_holder.enter_value")})]},t):null),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"text-sm font-medium mb-1 flex items-center gap-2",children:[(0,a.jsx)("span",{children:F("common.description")}),(0,a.jsx)("div",{children:(0,a.jsx)(b.TooltipProvider,{children:(0,a.jsxs)(b.Tooltip,{children:[(0,a.jsx)(b.TooltipTrigger,{asChild:!0,children:(0,a.jsx)(A.Info,{className:"w-4 text-custom-dark-blue cursor-pointer"})}),(0,a.jsx)(b.TooltipContent,{className:"bg-custom-dark-blue",children:(0,a.jsx)("p",{className:"p-1 text-sm font-medium",children:F("common.please_provide_description")})})]})})})]}),(0,a.jsx)(y.Textarea,{id:"description",...k("description"),className:"app-input",placeholder:F("place_holder.enter_value")})]}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(h.SubmitButton,{IsLoading:W,AddLabel:F("button.update_changes")})})]})]})})})},D="cash_on_delivery",F=()=>{let e=(0,c.useAppDispatch)(),i=(0,u.useTranslations)(),[n,p]=(0,d.useState)(D),{paymentGetwayList:h,refetch:x}=((e={})=>{let{findAll:a}=o(s.API_ENDPOINTS.PAYMENT_GETWAY),t=(0,d.useRef)(null),{data:i,isPending:n,error:c,refetch:m,isFetching:u}=(0,r.useQuery)({queryKey:[s.API_ENDPOINTS.PAYMENT_GETWAY,"list"],queryFn:()=>a(e),retry:!1,refetchOnWindowFocus:!1,...e});return(0,d.useEffect)(()=>{let e=c?.response?.data?.message;c&&e!==t.current&&(t.current=e,l.toast?.error(`${e}`,{onClose:()=>{t.current=null}}))},[c]),{paymentGetwayList:i?.data??[],error:c,isPending:n,refetch:m,isFetching:u}})({}),g=(0,d.useMemo)(()=>(Array.isArray(h)?h:Array.isArray(h?.gateways)?h.gateways:Array.isArray(h?.paymentGateways)?h.paymentGateways:[]).map(e=>({id:String(e?.slug??""),label:String(e?.name??e?.slug??"").trim(),status:!!e?.status,is_test_mode:!!e?.is_test_mode})).filter(e=>e.id.length>0),[h]);(0,d.useEffect)(()=>{!g.length||g.some(e=>e.id===n)||p(g[0].id)},[g,n]);let _=n||g[0]?.id||D,{paymentgetway:f,refetch:y,isFetching:b,isPending:v,error:j}=(e=>{let{find:a}=o(s.API_ENDPOINTS.PAYMENT_GETWAY),t=(0,d.useRef)(null),{data:i,isPending:n,error:c,refetch:m,isFetching:u}=(0,r.useQuery)({queryKey:[s.API_ENDPOINTS.PAYMENT_GETWAY+"/"+e],queryFn:()=>a(e),retry:!1,refetchOnWindowFocus:!1});return(0,d.useEffect)(()=>{let e=c?.response?.data?.message;c&&e!==t.current&&(t.current=e,l.toast?.error(`${e}`,{onClose:()=>{t.current=null}}))},[c]),{paymentgetway:i?.data.gateways??{},error:c,isPending:n,refetch:m,isFetching:u}})(_);return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-8 gap-0 md:gap-5",children:[(0,a.jsx)("div",{className:"col-span-1",children:(0,a.jsx)(t.Card,{className:"sticky inset-x-0 top-24 left-0 mt-4",children:(0,a.jsx)(t.CardContent,{className:"p-2 md:p-4",children:g.map(t=>(0,a.jsx)("div",{onClick:()=>{p(t.id),e((0,m.setRefetch)(!0))},className:`cursor-pointer my-2 rounded p-2 ${_===t.id?"bg-blue-500 text-white":""} ${_!==t.id?t.status?"bg-blue-50 text-blue-500":"bg-gray-100 text-gray-500":""}`,children:(0,a.jsxs)("button",{className:"text-sm font-semibold text-start",children:[t.label,t.status?` (${i("common.live")})`:` (${i("common.inactive")})`]})},t.id))})})}),(0,a.jsx)(t.Card,{className:"mt-4 col-span-7 min-h-[calc(100vh-74px)]",children:(0,a.jsx)("div",{className:"p-2",children:(0,a.jsx)(M,{paymentgetway:f,refetch:y,refetchList:x,isPending:v,getwayname:_,isFetching:b,error:j})})})]})};e.s(["default",0,()=>{let e=(0,u.useTranslations)();return(0,a.jsxs)("div",{children:[(0,a.jsx)(t.Card,{children:(0,a.jsx)(t.CardContent,{className:"flex flex-col md:flex-row gap-4  justify-between p-2 md:p-4",children:(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-lg md:text-2xl font-semibold text-blue-500 flex items-center gap-2",children:e("label.payment_settings")})})})}),(0,a.jsx)(F,{})]})}],383595)}]);