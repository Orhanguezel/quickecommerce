(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,205019,e=>{"use strict";var t=e.i(843476);e.i(614271);var a=e.i(519455),s=e.i(515288),r=e.i(302747),l=e.i(948148),i=e.i(271645);e.i(12138);var n=e.i(417135),d=e.i(459565),c=e.i(793479),o=e.i(554226),m=e.i(536719),x=e.i(305417),u=e.i(555436),p=e.i(618566);let h=({finalSelectedID:e,setfinalSelectedID:r,setSearchValue:h})=>{let g=(0,l.useTranslations)(),b=(0,p.usePathname)(),f=b.split("/")[1],y=(0,m.useAppSelector)(e=>e.store.selectedStore),j=y?.type,[v,N]=(0,i.useState)(""),[_,w]=(0,i.useState)(!1),[k,S]=(0,i.useState)([]),[C,$]=(0,i.useState)([]),P=()=>{h(v)},{categories:A}=(0,o.useCategoriesQuery)({pagination:!1,type:j??""}),F=A?.data||[];return(0,i.useEffect)(()=>{w(!1)},[b]),(0,i.useEffect)(()=>(_?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[_]),i.default.useEffect(()=>{""===v.trim()&&h("")},[v]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.default,{isLoading:_}),(0,t.jsx)(s.Card,{className:"",children:(0,t.jsxs)(s.CardContent,{className:"space-y-4 p-2 md:p-4",children:[(0,t.jsx)("div",{className:"py-2 md:py-0",children:(0,t.jsxs)("h1",{className:"text-md xl:text-2xl font-semibold text-black dark:text-white flex items-center gap-2",children:[" ",(0,t.jsx)(x.PackageSearch,{})," Products & Filter"]})}),(0,t.jsxs)("div",{className:"space-y-4 pb-3",children:[(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(n.AppNestedDropdown,{selectedItems:k,selectedIDs:C,finalSelectedID:e,setfinalSelectedID:r,setSelectedItems:S,setSelectedIDs:$,groups:F})}),(0,t.jsxs)("div",{className:"relative flex items-center gap-2 w-full",children:[(0,t.jsx)("div",{className:`${"ar"===f?"right-3":"left-3"} absolute  text-gray-500 dark:text-white mt-0.5`,children:(0,t.jsx)(u.Search,{width:18,height:18})}),(0,t.jsx)(c.Input,{type:"text",placeholder:g("place_holder.search_by_product"),value:v,onKeyDown:e=>{"Enter"===e.key&&P()},onChange:e=>{N(e.target.value)},className:"app-input px-10"}),(0,t.jsx)(a.Button,{variant:"outline",onClick:P,className:"app-button mx-2 lg:mx-0",children:g("button.search")})]})]})]})})]})};var g=e.i(680401),b=e.i(225960),f=e.i(526354),y=e.i(88653),j=e.i(846932),v=e.i(818836),N=e.i(274323),_=e.i(861745),w=e.i(657688),k=e.i(155487),S=e.i(170319),C=e.i(769542),$=e.i(494881),P=e.i(117595),A=e.i(299023),F=e.i(107233),q=e.i(37727);e.i(941983);var O=e.i(872225),E=e.i(579053),T=e.i(980401),D=e.i(771469),B=e.i(54395),I=e.i(317408),M=e.i(529745);function z({onClose:e,slug:s}){let r=(0,_.useLocale)(),n=(0,m.useAppSelector)(e=>e.store.selectedStore),d=n?.id??"",{productdetails:c}=(0,M.useProductDetailsQueryBySKU)(s,d,r),o=(0,i.useMemo)(()=>c.data||{},[c.data]),x=(0,l.useTranslations)(),u=(0,k.useDispatch)(),[h,y]=(0,i.useState)(o?.image_url||"/images/no-image.png"),[v,N]=(0,i.useState)(""),[z,R]=(0,i.useState)(1),[L,Q]=(0,i.useState)({x:"50%",y:"50%"}),[U,Y]=(0,i.useState)(o&&o.variants&&o.variants.length>0?o.variants[0]:null),[K,V]=(0,i.useState)({}),[X,H]=(0,i.useState)({}),[J,W]=(0,i.useState)(!0),[G,Z]=(0,i.useState)(!1),[ee,et]=(0,i.useState)(""),ea=e=>{et(e),setTimeout(()=>et(""),3e3)};(0,p.useRouter)(),P.default.get($.AUTH_TOKEN_KEY);let es=(0,k.useSelector)(e=>e.cart.cart).find(e=>e.id===o?.id),er=es?.quantity||0,{currency:el}=(0,f.useCurrencyQuery)({}),ei=(0,i.useMemo)(()=>el||{},[el]).currencies_info;function en(e,t,a){let s=t&&t>0?t:e;if(a&&s>0){let e=Number(a.discount_amount||"0");if("percentage"===a.discount_type){let t=Number((0,D.formatNumberOnly)(s*e/100,ei));return s-t}if("fixed"===a.discount_type)return s-Number((0,D.formatNumberOnly)(e,ei))}return s}let ed=ei?(0,D.formatNumberOnly)(en(Number(U?.price),Number(U?.special_price),o.flash_sale),ei):en(Number(U?.price),Number(U?.special_price),o.flash_sale),ec=[...o?.image_url?[o.image_url]:[],...o?.gallery_images_urls?o.gallery_images_urls.split(","):[],...o?.variants?.length?o.variants.map(e=>e.image_url).filter(Boolean):[]],eo=o.rating?Math.floor(o.rating):0,em=!!o.rating&&o.rating%1!=0;(0,i.useEffect)(()=>{if(!o||!o.variants)return;let e={},t={};o.variants.forEach(a=>{Object.entries(a.attributes).forEach(([a,s])=>{e[a]||(e[a]=[]),(Array.isArray(s)?s:[s]).forEach(t=>{e[a].some(e=>e.value===t)||e[a].push({value:t,label:t})}),t[a]||(t[a]=Array.isArray(s)?s[0]:s)})}),V(e),H(t)},[o]),(0,i.useEffect)(()=>{if(!o||!o.variants)return;let e=o.variants.find(e=>Object.entries(X).every(([t,a])=>{let s=e.attributes[t];return Array.isArray(s)?s.includes(a):s===a}));y(e?.image_url||o?.image_url),e?(Y(e),W(!0)):W(!1)},[X,o]);let ex={id:o?.id||0,store_id:o?.store?.id||0,store:o?.store?.name||"",store_delivery_time:o?.store?.delivery_time||"",store_tax:o?.store?.tax||"",area_id:o?.store?.area_id,name:o?.name||"Unknown Product",price:Number(ed.toString().replace(/,/g,"")),max_cart_qty:Number(o?.max_cart_qty),stock:U?.stock_quantity,unit:o?.unit_name,quantity:z,image:h||"/images/no-image.png",slug:U?.sku||"",additional_charge_name:o?.store?.additional_charge_name,additional_charge_amount:o?.store?.additional_charge_amount,additional_charge_type:o?.store?.additional_charge_type,variantDetails:{id:U?.id||0,variant_slug:U?.variant_slug,sku:U?.sku,attributes:{...U?.attributes||{}}}},eu=t=>{t.stopPropagation(),Z(!0);let a=document.querySelector(".main-product-image");if(!a)return void Z(!1);let s=a.getBoundingClientRect(),r=a.cloneNode(!0);r.style.position="fixed",r.style.left=`${s.left}px`,r.style.top=`${s.top}px`,r.style.width=`${s.width}px`,r.style.height=`${s.height}px`,r.style.transition="all 0.8s ease-in-out",r.style.zIndex="1000",r.style.pointerEvents="none",document.body.appendChild(r);let l=document.querySelector(".cart-icon");if(!l)return;let i=l.getBoundingClientRect();setTimeout(()=>{r.style.left=`${i.left+i.width/2}px`,r.style.top=`${i.top+i.height/2}px`,r.style.width="30px",r.style.height="30px",r.style.opacity="0.5"},50),setTimeout(()=>{document.body.removeChild(r),u((0,B.addToCart)(ex)),S.toast.success(`${o.name} has been added to your cart!`),Z(!1),e()},800)};return(0,i.useEffect)(()=>{if(o?.warranty){let e=JSON.parse(o.warranty);e&&e[0]?N(`${e[0].warranty_period} ${e[0].warranty_text}`):N("")}else N("")},[o]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(j.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"fixed inset-0 bg-black/50 z-80 flex items-center justify-center",children:(0,t.jsxs)(j.motion.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.4,ease:"easeInOut"},className:"custom-scrollbar bg-white dark:bg-[#334155] p-6 rounded-lg shadow-lg w-full max-w-[95%] sm:max-w-[80%] md:max-w-[70%] lg:max-w-[60rem] overflow-y-auto lg:overflow-hidden h-[600px] lg:h-auto min-h-[400px] min-w-[280px] xs:min-w-[350px] md:min-w-[700px]",onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-gray-100",children:o.name}),(0,t.jsx)("button",{onClick:e,className:"text-gray-600 hover:text-gray-800 dark:text-gray-300 dark:hover:text-gray-100",children:(0,t.jsx)(q.X,{})})]}),o&&0===Object.keys(o).length?(0,t.jsx)("div",{className:"min-h-[400px] flex items-center justify-center",children:(0,t.jsx)(C.default,{customClass:"mt-10",size:"large"})}):(0,t.jsxs)("div",{className:"grid grid-cols-12 gap-6",children:[(0,t.jsx)("div",{className:"col-span-12 lg:col-span-5",children:(0,t.jsxs)("div",{className:"grid grid-cols-6",children:[(0,t.jsx)("div",{className:"col-span-6 mb-4 border rounded-sm",children:(0,t.jsx)("div",{className:"relative overflow-hidden group px-6",onMouseMove:e=>{let t=e.currentTarget.getBoundingClientRect(),a=(e.clientX-t.left)/t.width*100,s=(e.clientY-t.top)/t.height*100;Q({x:`${a}%`,y:`${s}%`})},children:(0,t.jsx)(w.default,{src:h||"/images/no-image.png",alt:"Main Image",width:1e3,height:400,style:{transformOrigin:`${L.x} ${L.y}`},className:"w-full h-96 object-contain transition-transform duration-300 ease-in-out group-hover:scale-150 cursor-zoom-in main-product-image",loader:b.default})})}),(0,t.jsx)("div",{className:"col-span-6",children:(0,t.jsx)(T.Swiper,{modules:[E.Navigation,O.Autoplay],spaceBetween:10,slidesPerView:3,loop:ec.length>3,autoplay:{delay:3e3,disableOnInteraction:!1,waitForTransition:!1},speed:2500,className:"relative w-full",onInit:e=>{setTimeout(()=>{e?.autoplay&&"function"==typeof e.autoplay.start&&e.autoplay.start()},100)},children:ec.map((e,a)=>(0,t.jsx)(T.SwiperSlide,{children:(0,t.jsx)("div",{className:"relative px-2",children:(0,t.jsx)(w.default,{src:e||"/images/no-image.png",alt:`Thumbnail ${a}`,width:200,height:64,className:`object-fill cursor-pointer border h-[64px]  w-[200px] ${e===h?"border-blue-400":"border-gray-300"}`,onClick:()=>{let t;return y(e),void((t=o?.variants?.find(t=>t.image_url===e))&&Y(t))},onMouseEnter:()=>y(e),loader:b.default})})},a))})})]})}),(0,t.jsxs)("div",{className:"col-span-12 lg:col-span-7",children:[(0,t.jsxs)("div",{className:"h-[380px] overflow-hidden lg:overflow-auto custom-scrollbar",children:[(0,t.jsxs)("div",{className:"border-b pb-2 dark:border-gray-700",children:[(0,t.jsx)("p",{className:"text-[24px] font-bold line-clamp-2",children:o.name||"Unknown Product"}),(0,t.jsx)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-100 mt-2",children:(0,t.jsxs)("span",{className:"flex items-center gap-1 text-[14px] ",children:[(0,t.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>{let s=0;return a<eo?s=100:a===eo&&em&&(s=50),(0,t.jsx)(g.default,{fillPercentage:s},a)})}),(0,t.jsx)("span",{className:"text-[#282B31] dark:text-gray-100 font-semibold",children:o.rating})," ",(0,t.jsxs)("span",{className:"text-[#585858] dark:text-gray-400",children:["(",o.review_count," ",x("orders.reviews"),")"]})]})}),(0,t.jsx)("div",{className:"",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-2 md:gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("p",{className:"text-[24px] sm:text-[36px] font-semibold text-[#222222] dark:text-gray-100",children:U?ei?(0,I.formatPrice)(en(Number(U?.price),Number(U?.special_price),o.flash_sale),ei):en(Number(U?.price),Number(U?.special_price),o.flash_sale):0}),(o.flash_sale||U?.special_price>0)&&(0,t.jsx)("p",{className:"line-through text-[#5C5C5C] dark:text-gray-400 text-[18px] sm:text-[24px]",children:ei?(0,I.formatPrice)(o.flash_sale&&U?.special_price>0?Number(U?.special_price):Number(U?.price),ei):o.flash_sale&&U?.special_price>0?Number(U?.special_price):Number(U?.price)})]}),o.flash_sale&&(0,t.jsx)("p",{className:"text-[12px] text-[#EB5A25] px-2 bg-[#EB5A251A] border border-[#EB5A25] rounded-sm",children:"Flash Deals"}),U?.stock_quantity>0&&J?(0,t.jsx)("p",{className:"text-[14px] text-[#00A537] px-2 bg-[#F4F8F5] border border-[#C5E7C9] rounded-sm",children:"In Stock"}):(0,t.jsx)("p",{className:"text-[14px] text-[#FF0000] px-2 bg-[#F8D7DA] border border-[#F5C6CB] rounded-sm",children:"Out of Stock"})]})})]}),(0,t.jsxs)("div",{className:"space-y-3 py-3 text-[14px] sm:text-[16px] border-b",children:[U?.sku&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("label",{className:"block font-semibold",children:[" ",x("label.sku")]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:U?.sku})]}),o?.category?.category_name&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("label",{className:"block font-semibold ",children:[" ",x("label.categorys")]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:o?.category?.category_name})]}),o?.brand?.label&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("label",{className:"block font-semibold",children:[x("label.brand"),":"]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:o?.brand?.label})]}),v&&(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("label",{className:"block font-semibold",children:[x("label.warranty"),":"]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:v})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("label",{className:"block font-semibold",children:[x("label.stock"),":"]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:U?.stock_quantity&&J?U?.stock_quantity:0})]})]}),(0,t.jsx)("div",{className:"py-2 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-1 2xl:grid-cols-2 ",children:Object.entries(K).map(([e,a])=>(0,t.jsxs)("div",{className:"",children:[(0,t.jsxs)("label",{className:"block font-semibold py-1",children:[e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")," "]}),(0,t.jsx)("div",{className:"flex gap-2 items-center overflow-x-auto flex-wrap",children:a.map(a=>(0,t.jsx)("button",{type:"button",className:`px-3 py-1 rounded transition text-[14px] ${X[e]===a.value?"bg-blue-angle text-white":"bg-[#F5FAFF] text-[#676767]"}`,onClick:()=>{var t;return t=a.value,void H(a=>({...a,[e]:t}))},children:a.label},a.value))})]},e))})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 items-end rounded-md bg-white dark:bg-gray-800 mt-4",children:[(0,t.jsxs)("div",{className:"w-full md:w-40",children:[(0,t.jsx)("p",{className:"text-lg font-semibold dark:text-gray-100 mb-2",children:"Quantity"}),(0,t.jsxs)("div",{className:"flex items-center justify-between border p-1 rounded-md min-w-[60%] sm:min-w-[50%]",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),R(e=>Math.max(1,e-1))},className:`p-2 rounded-md ${1===z?"bg-[#DEE0E5] dark:bg-gray-700 text-[#AFB1B6] cursor-not-allowed":"bg-[#DEE0E5] dark:bg-gray-700 hover:bg-[#2563EB] dark:hover:bg-blue-600 text-[#AFB1B6] dark:text-gray-300 hover:text-white"}`,disabled:1===z,children:(0,t.jsx)(A.Minus,{width:12,height:12})}),(0,t.jsx)("span",{className:"text-[#282B31] dark:text-gray-100 font-semibold px-2 text-[14px]",children:z}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),z<Math.min(Number(o?.max_cart_qty)||1,U?.stock_quantity)&&J?R(e=>e+1):(Number(o?.max_cart_qty)||1)<=U?.stock_quantity&&z>=o?.max_cart_qty?ea(`Maximum allowed quantity (${Number(o?.max_cart_qty)||1}) reached.`):U?.stock_quantity<(Number(o?.max_cart_qty)||1)&&z>=U?.stock_quantity?ea(`Only ${U?.stock_quantity} item(s) in stock.`):ea("You have reached the limit.")},className:"p-2 rounded-md bg-[#DEE0E5] dark:bg-gray-700 hover:bg-[#2563EB] dark:hover:bg-blue-600 text-[#AFB1B6] dark:text-gray-300 hover:text-white",children:(0,t.jsx)(F.Plus,{width:12,height:12})}),ee&&(0,t.jsx)("div",{className:"absolute bottom-full mb-1 -right-7 -translate-x-1/2 px-3 py-1 bg-black text-white text-xs rounded-md shadow-md z-10 whitespace-nowrap",children:ee})]})]})]}),(0,t.jsx)("div",{className:"flex flex-col sm:flex-row w-full justify-end",children:U?.stock_quantity>0&&J?(0,t.jsx)(a.Button,{onClick:eu,disabled:G||er>0,className:"app-button w-full md:w-40",children:(0,t.jsx)("span",{children:"Add to Card"})}):(0,t.jsx)(a.Button,{onClick:eu,disabled:!0,className:"app-button w-full md:w-40",children:(0,t.jsx)("span",{children:"Add to Card"})})})]})]})]})]})},"backdrop")})}var R=e.i(587223),L=e.i(213119);function Q({id:e,store_id:a,store:s,store_delivery_time:r,store_tax:n,title:c,imageSrc:o,price:m,special_price:x,effective_price:u,discount:h,reviews:C,rating:$,slug:P="",status:A,max_cart_qty:F,Stock:q=0,refetchList:O,variantsList:E=[],ifWishlist:T=!1,isMultiVariant:M=!1,onRemove:Q,area_id:U,additional_charge_name:Y,additional_charge_amount:K,additional_charge_type:V,flash_sale:X,unit:H}){let J=(0,_.useLocale)();(0,l.useTranslations)();let[W,G]=(0,i.useState)(""),[Z,ee]=(0,i.useState)(!1),et=(0,k.useDispatch)(),ea=(0,p.usePathname)(),[es,er]=(0,i.useState)(!1),el=(0,k.useSelector)(e=>e.cart.cart).find(t=>t.id===e),ei=el?.quantity||0,en=el?.stock||0,ed=Number(el?.max_cart_qty)||1,{currency:ec,refetch:eo}=(0,f.useCurrencyQuery)({}),em=(0,i.useMemo)(()=>ec||{},[ec]).currencies_info,ex=$?Math.floor($):0,eu=!!$&&$%1!=0;function ep(e,t,a){let s=t&&t>0?t:e;if(a&&s>0){let e=Number(a.discount_amount||"0");if("percentage"===a.discount_type){let t=Number((0,D.formatNumberOnly)(s*e/100,em));return s-t}if("fixed"===a.discount_type)return s-Number((0,D.formatNumberOnly)(e,em))}return s}let eh={id:e||0,store_id:a||0,store:s||"",store_tax:n||"",area_id:U||0,store_delivery_time:r||"",name:c||"Unknown Product",price:Number((em?(0,D.formatNumberOnly)(ep(Number(m),Number(x),X),em):ep(Number(m),Number(x),X)).toString().replace(/,/g,""))||0,quantity:1,image:o,stock:q,unit:H,max_cart_qty:Number(F),slug:E?.[0]?.sku||"",additional_charge_name:Y,additional_charge_amount:K,additional_charge_type:V,variantDetails:{id:E?.[0]?.id||0,variant_slug:E?.[0]?.variant_slug,sku:E?.[0]?.sku,attributes:(()=>{try{return JSON.parse(E?.[0]?.attributes||"{}")}catch(e){return{}}})()}},eg=()=>{ee(!1)};(0,i.useEffect)(()=>(Z?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[Z]),(0,i.useEffect)(()=>{er(!1)},[ea]),(0,i.useEffect)(()=>(document.body.style.overflow=es?"hidden":"auto",()=>{document.body.style.overflow="auto"}),[es]);let eb=ei>=en,ef=ei>=ed,ey="";return ey=ef&&ed<=en?`Maximum ${ed} allowed`:eb&&en<ed?`Only ${en} in stock`:"You have reached the limit",(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.default,{isLoading:es}),(0,t.jsxs)("div",{className:"relative group bg-white dark:bg-[#0A121C]  rounded-[10px] w-full p-[14px] sm:w-full  h-[305px] border-[0.5px] border-transparent dark:border-[#374151] shadow-[-1px_1px_12px_0px_#0000000F] dark:shadow-[0px_2px_15px_0px_#0000000D]  hover:drop-shadow-md dark:hover:drop-shadow-[0_4px_12px_rgba(255,255,255,0.05)]  cursor-pointer",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("div",{className:"relative flex justify-center group h-[180px] w-full  rounded-[10px]",children:[(0,t.jsxs)("div",{className:"absolute top-2 left-2 flex items-center gap-2",children:[A&&(0,t.jsx)(L.default,{text:A,locale:J}),X&&(0,t.jsx)("div",{className:"",children:(0,t.jsx)(R.default,{height:24,width:36})})]}),X?(0,t.jsx)("div",{className:"absolute top-2 right-2 bg-red-500 text-[#FFFFFF] dark:bg-red-600 dark:text-white text-[10px] px-1 py-1 rounded",children:"percentage"===X.discount_type?`${X.discount_amount}%`:`${em?(0,I.formatPrice)(Number(X.discount_amount),em):Number(X.discount_amount)}`}):x&&x>0?(0,t.jsx)("div",{className:"absolute top-2 right-2 bg-red-500 text-[#FFFFFF] dark:bg-red-600 dark:text-white text-[10px] px-2 py-1 rounded",children:`${h??0}%`}):null,(0,t.jsx)("div",{className:"w-[180px] h-[160px]",children:(0,t.jsx)(w.default,{src:o&&""!==o.trim()?o:"/images/no-image.png",alt:c,width:500,height:500,className:"w-full h-full",loader:b.default})})]})}),(0,t.jsxs)("div",{className:"mt-1",children:[void 0!==$&&void 0!==C&&Number($)>0?(0,t.jsx)("div",{className:"flex items-center justify-between ",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>{let s=0;return a<ex?s=100:a===ex&&eu&&(s=50),(0,t.jsx)(g.default,{fillPercentage:s},a)})}),(0,t.jsxs)("span",{className:"text-[#585858] dark:text-white ml-1 text-[12px]",children:["(",C,")"]})]})}):(0,t.jsx)("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>{let s=0;return a<0?s=100:a===ex&&eu&&(s=50),(0,t.jsx)(g.default,{fillPercentage:s},a)})}),(0,t.jsxs)("span",{className:"text-[#585858] dark:text-white ml-1 text-[12px]",children:["(",C,")"]})]})}),(0,t.jsx)("p",{className:"text-[16px] text-[#686868] dark:text-[#D1D5DB] font-[600] line-clamp-1 hover:text-blue-400 dark:hover:text-blue-300 hover:underline",children:c}),(0,t.jsx)("div",{className:`flex items-center pt-[2px]  ${q>0?"text-[#34A853]":"text-[#EA4335]"}`,children:(0,t.jsx)("span",{className:"text-[14px]",children:q>0?"In Stock":"Out of Stock"})})]}),(0,t.jsx)("div",{className:"flex justify-between items-center",children:(0,t.jsxs)("div",{className:"flex items-end gap-[2px] truncate w-2/3 ",children:[(0,t.jsx)("span",{className:"text-[#2563EB] font-semibold text-[16px]",children:em?(0,I.formatPrice)(ep(Number(m),Number(x),X),em):ep(Number(m),Number(x),X)}),(X||void 0!==x&&x>0)&&(0,t.jsx)("p",{className:"line-through text-[#848484] dark:text-[#9CA3AF] font-medium text-[14px]",children:em?(0,I.formatPrice)(X&&void 0!==x&&x>0?Number(x):Number(m),em):X&&void 0!==x&&x>0?Number(x):Number(m)})]})}),(0,t.jsx)("div",{className:"rounded-[10px] py-2 absolute bottom-[-1] left-1/2 -translate-x-1/2 bg-[#0c0c0cc6] border-l border-r border-b w-full h-full opacity-0 group-hover:opacity-90 transition-opacity duration-300 flex flex-col items-center justify-center",onClick:e=>{if(0===ei){if(e.stopPropagation(),0===q)return void e.preventDefault();0===E.length?(e.stopPropagation(),ee(!0),G(P)):(e=>{e.stopPropagation();let t=document.querySelector(".cart-icon"),a=e.target.closest(".relative")?.querySelector("img");if(t&&a){let e=t.getBoundingClientRect(),s=a.getBoundingClientRect(),r=a.cloneNode(!0);r.style.position="fixed",r.style.left=`${s.left}px`,r.style.top=`${s.top}px`,r.style.width=`${s.width}px`,r.style.height=`${s.height}px`,r.style.transition="all 0.5s ease-out",r.style.zIndex="999",r.style.pointerEvents="none",document.body.appendChild(r),setTimeout(()=>{r.style.left=`${e.left+e.width/2-s.width/4}px`,r.style.top=`${e.top+e.height/2-s.height/4}px`,r.style.width="20px",r.style.height="20px",r.style.opacity="0"},0),et((0,B.addToCart)(eh)),S.toast.success(`${c} has been added to your cart!`),setTimeout(()=>{document.body.removeChild(r)},500)}})(e)}},children:0===ei?(0,t.jsx)(N.PlusCircle,{size:32,className:"text-white cursor-pointer"}):(0,t.jsxs)("div",{className:"flex items-center justify-between bg-transparent p-[3px] rounded-[5px]",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),e.stopPropagation(),et((0,B.updateQuantity)({id:eh.id,quantity:ei-1}))},disabled:1===ei,children:(0,t.jsx)(v.MinusCircle,{size:32,className:"text-white"})}),(0,t.jsx)("span",{className:"text-white text-lg font-semibold w-[40px] text-center",children:ei<10?`0${ei}`:ei}),(0,t.jsxs)("div",{className:"relative group/inc",children:[(0,t.jsx)("button",{onClick:e=>{e.stopPropagation(),e.stopPropagation(),ei<en?et((0,B.updateQuantity)({id:eh.id,quantity:ei+1})):S.toast.error("You have reached the maximum available stock!")},disabled:ei>=Math.min(ed,en),children:(0,t.jsx)(N.PlusCircle,{size:32,className:ei<Math.min(ed,en)?"text-white":"text-white opacity-50 cursor-not-allowed"})}),(ef||eb)&&(0,t.jsx)("div",{className:"absolute bottom-[-35px] right-[-90px] -translate-x-1/2 mb-1 hidden group-hover/inc:block px-2 py-1 bg-black text-white text-xs rounded shadow-md whitespace-nowrap z-10",children:ey})]})]})})]}),(0,t.jsx)(y.AnimatePresence,{children:Z&&(0,t.jsx)(j.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},onClick:eg,className:"fixed inset-0 bg-black/20 z-80 flex items-center justify-center",children:(0,t.jsx)(z,{onClose:eg,slug:W})},"backdrop")})]})}var U=e.i(843119),Y=e.i(771224),K=e.i(645847),V=e.i(941012),X=e.i(976592),H=e.i(632814);let J=({trigger:e,total:a,payemtMethod:s,cartData:r,customerDetails:i,coupon:n,handlePlaceOrder:d,isModalOpen:c,setIsModalOpen:o,isPending:x})=>{(0,m.useAppDispatch)(),(0,l.useTranslations)();let u=(0,p.usePathname)().split("/")[1];return(0,t.jsx)(H.AppModal,{trigger:e,actionButtonLabel:"Confirm",customClass:"inset-x-0p md:inset-x-30p lg:inset-x-35p 2xl:inset-x-40p top-[200px] bg-white",onSave:d,isOpen:c,onOpenChange:o,IsLoading:x,disable:x,hideX:!0,children:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex flex-col itmes-center justify-center mt-4 w-full",dir:"ar"===u?"rtl":"ltr",children:[(0,t.jsx)("div",{className:"mt-4 flex itmes-center justify-center w-full",children:(0,t.jsx)("div",{className:"flex w-auto bg-blue-500 rounded-full p-3 ",children:(0,t.jsx)(X.default,{})})}),(0,t.jsx)("div",{className:"py-2 flex itmes-center justify-center w-full",children:(0,t.jsx)("h1",{className:"text-2xl font-bold text-black dark:text-white",children:"Confirm Order!"})}),(0,t.jsxs)("div",{className:"my-6 text-md font-semibold text-gray-500 mx-4",children:[(0,t.jsxs)("div",{className:"border-b border-slate-300 flex items-center justify-between py-3",children:[(0,t.jsx)("h1",{children:"cash"===s?"Received Amount":"Total Amount"}),(0,t.jsx)("h1",{className:"text-lg font-bold text-black dark:text-white",children:a})]}),(0,t.jsxs)("div",{className:"border-b border-slate-300 flex items-center justify-between py-3",children:[(0,t.jsx)("h1",{children:"Payment Method"}),(0,t.jsx)("h1",{className:"uppercase text-lg font-bold text-black dark:text-white",children:s})]})]})]})})})};var W=e.i(727430);let G=({customerDetails:e})=>{let r=(0,l.useTranslations)(),[n,d]=(0,i.useState)(!1),[c,o]=(0,i.useState)(""),[x,u]=(0,i.useState)(""),[p,h]=(0,i.useState)(0),[g,y]=(0,i.useState)(""),[j,v]=(0,i.useState)(null),[N,_]=(0,i.useState)(0),S=(0,m.useAppSelector)(e=>e.store.selectedStore),C=S?.id,[$,P]=(0,i.useState)(!1),[q,O]=(0,i.useState)("cash"),E=(0,k.useSelector)(e=>e.cart.cart),T=(0,k.useSelector)(e=>e.cart.totalPrice),z=(0,k.useDispatch)();E.length;let{PosSettings:R}=(0,M.usePosSettingsQuery)({}),L=(0,i.useMemo)(()=>R||[],[R]),Q=L?.data,{currency:X,refetch:H}=(0,f.useCurrencyQuery)({}),G=(0,i.useMemo)(()=>X||{},[X]).currencies_info,{mutate:Z,isPending:ee}=(0,M.useCouponMutation)();(0,i.useEffect)(()=>{j&&(v(null),u(""),_(0))},[T,j]);let et={package:Object.values(E.reduce((e,t)=>{let a=t.store_id,s=t.quantity;return e[a]||(e[a]={items:[]}),e[a].items.push({product_id:t.id,quantity:s,variant_id:t.variantDetails?.id||null}),e},{}))},ea=E.map(e=>{let t=e.price*(Number(e.store_tax)/100)*e.quantity;return G?(0,D.formatNumberOnly)(Number(e.store_tax),G):e.store_tax,{...e,item_tax:G?(0,D.formatNumberOnly)(Number(t),G):Number(t)}});(0,i.useEffect)(()=>{if(!Array.isArray(ea)||0===ea.length)return;let e=ea.reduce((e,t)=>e+Number(t.item_tax??0),0);e!==p&&h(e)},[ea,p]);let es=Number(T)-Number(N)+Number(p),er={store_id:C,customer_id:e?.id,payment_gateway:q,...x&&{coupon_code:x},...et},{mutate:el}=(0,M.usePosInvoiceMutation)(),{mutate:ei,isPending:en}=(0,M.usePlaceOrderMutation)(),ed=(e,t)=>{z((0,B.updateQuantity)({id:e,quantity:t}))};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.Card,{className:"sticky top-[90px]",children:(0,t.jsx)(s.CardContent,{className:"space-y-4 p-2 md:p-4",children:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{className:"w-full rounded-lg  cart-icon",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"border-b pb-4 border-slate-300 grid grid-cols-7 text-sm font-semibold sm:font-bold",children:[(0,t.jsx)("h2",{className:"col-span-3",children:"Item"}),(0,t.jsx)("h2",{className:"text-center",children:"Price"}),(0,t.jsx)("h2",{className:"text-center",children:"Qty"}),(0,t.jsx)("h2",{className:"text-end",children:"Sub Total"}),(0,t.jsx)("h2",{className:"text-end",children:"Actions"})]}),(0,t.jsx)("div",{className:" max-h-[350px] min-h-[200px] overflow-y-auto custom-scrollbar",children:Array.isArray(E)&&E.length>0?E.map((e,a)=>{let s=(e.specialPrice||e.price)*e.quantity,r="string"==typeof e.image&&""!==e.image.trim()?e.image:"/images/no-image.png",l=1===e.quantity,i=e.quantity>=e.stock,n=e.quantity>=e.max_cart_qty,d=i||n,c="";return c=n&&e.max_cart_qty<=e.stock?`Maximum ${e.max_cart_qty} allowed per cart`:i&&e.stock<e.max_cart_qty?`Only ${e.stock} in stock`:"You have reached the limit",(0,t.jsx)("div",{className:"border-b border-slate-300",children:(0,t.jsxs)("div",{className:"grid grid-cols-7 py-4",children:[(0,t.jsxs)("div",{className:"col-span-3 flex items-center gap-1",children:[(0,t.jsx)("div",{className:"relative w-[50px] h-[50px]",children:(0,t.jsx)(w.default,{src:r,alt:"product_image_url",fill:!0,sizes:"(max-width: 640px) 64px, 80px",className:"object-contain rounded",loader:b.default})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-sm font-semibold truncate line-clamp-1",children:e.name}),(0,t.jsx)("div",{className:"",children:Object.entries(e?.variantDetails?.attributes).map(([e,a])=>(0,t.jsxs)("p",{className:"flex items-start text-black dark:text-white text-xs",children:[(0,t.jsxs)("span",{children:[e.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),":"]}),(0,t.jsx)("span",{className:"text-gray-500 dark:text-white text-xs ml-1",children:String(a)})]},e))})]})]}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-500 dark:text-gray-200 text-center flex items-center justify-center",children:G?(0,I.formatPrice)(e.price,G):e.price}),(0,t.jsx)("div",{className:"flex flex-col items-center justify-center gap-1",children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-1 bg-white dark:bg-[#1F2937]",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("button",{onClick:()=>ed(e.id,e.quantity-1),className:`px-1 py-1 text-gray-700 border rounded ${l?"bg-transparent dark:bg-gray-600 text-gray-700 dark:text-white cursor-not-allowed":"bg-transparent dark:bg-gray-600 hover:bg-blue-500 text-gray-700 hover:text-white dark:text-white"}`,disabled:l,children:(0,t.jsx)(A.Minus,{size:14})})}),(0,t.jsx)("div",{className:"w-8 text-sm font-semibold text-gray-500 dark:text-gray-200 text-center",children:e.quantity}),(0,t.jsxs)("div",{className:"relative group/tooltip",children:[(0,t.jsx)("button",{onClick:()=>ed(e.id,e.quantity+1),className:`px-1 py-1 text-gray-700 bg-transparent border rounded dark:bg-gray-600 dark:text-white
                                    ${d?"cursor-not-allowed opacity-50":"hover:bg-blue-500 hover:text-white"}`,disabled:d,children:(0,t.jsx)(F.Plus,{size:14})}),d&&(0,t.jsx)("div",{className:"absolute bottom-[-35px] right-[-90px] -translate-x-1/2 mb-1 hidden group-hover/tooltip:block px-2 py-1 bg-black text-white text-xs rounded shadow-md whitespace-nowrap z-10",children:c})]})]})}),(0,t.jsx)("p",{className:"text-sm font-semibold text-gray-500 dark:text-gray-200 text-end flex items-center justify-end",children:G?(0,I.formatPrice)(s,G):s}),(0,t.jsx)("div",{className:"flex justify-end items-cneter",children:(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void z((0,B.removeFromCart)(t))},className:" text-red-500 hover:text-red-700 dark:text-red-400",children:(0,t.jsx)(W.default,{})})})]})},a)}):(0,t.jsx)("div",{className:"flex flex-col items-center justify-center text-gray-500 py-10",children:(0,t.jsx)("p",{className:"mt-2 text-lg  text-gray-500 dark:text-white font-bold",children:"Empty Cart"})})}),(0,t.jsxs)("div",{className:"pt-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("label",{className:"block text-blue-500 font-semibold text-[16px]",children:"Coupon"}),(0,t.jsx)("button",{onClick:()=>d(!n),className:"text-blue-500 font-semibold text-sm",children:n?(0,t.jsx)(Y.default,{}):(0,t.jsx)(U.default,{})})]}),n&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"flex items-center border rounded px-3 py-2 mt-2",children:[(0,t.jsx)(V.TicketPercent,{className:"text-gray-500 mr-3"}),(0,t.jsx)("input",{type:"text",value:c,onChange:e=>o(e.target.value),placeholder:r("place_holder.enter_coupon_code"),className:"flex-1 outline-none text-sm min-h-[50px] rounded-lg disabled:cursor-not-allowed",disabled:0===E.length}),(0,t.jsx)("button",{className:"ml-2 text-blue-500 font-semibold disabled:cursor-not-allowed",onClick:()=>Z({coupon_code:c,sub_total:T},{onSuccess:e=>{o(""),v(e.data.coupon),u(e.data.coupon.code),_(e.data.coupon.discounted_amount)}}),disabled:0===E.length||!c,children:"Apply"})]})})]}),(0,t.jsxs)("div",{className:"mt-6 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm ",children:[(0,t.jsx)("span",{children:"Sub Total"}),(0,t.jsx)("span",{children:G?(0,I.formatPrice)(T,G):T})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{children:"Coupon Discount"}),(0,t.jsxs)("span",{children:["(-)"," ",G?(0,I.formatPrice)(N,G):N.toFixed(2)]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm pb-4",children:[(0,t.jsxs)("span",{children:[r("common.tax"),E[0]?.store_tax?` (${(0,D.formatNumberOnly)(Number(E[0].store_tax),G)}%)`:""]}),(0,t.jsx)("span",{children:G?(0,I.formatPrice)(p,G):Number(p).toFixed(2)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-6 text-md font-semibold text-blue-600 border-t pt-2",children:[(0,t.jsx)("span",{children:"Total Amount"}),(0,t.jsx)("span",{children:G?(0,I.formatPrice)(es,G):es.toFixed(2)})]}),(0,t.jsxs)("div",{className:"pt-8 pb-4 flex items-center gap-2 border-t border-slate-300 ",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-black dark:text-white",children:"Paid By:"}),[{label:"Cash",value:"cash"},{label:"Card",value:"card"},{label:"Wallet",value:"wallet"}].map((e,a)=>{let s=q===e.value;return(0,t.jsx)("div",{onClick:()=>O(e.value),className:`flex cursor-pointer  rounded px-4 py-1 text-sm font-semibold transition-colors duration-200 ${s?"bg-blue-500 text-white border border-blue-500":"text-gray-500 border border-slate-500"}`,children:e.label},a)}),e?.wallet_balance!==void 0&&"wallet"===q&&(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2 bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-medium shadow-sm",children:[(0,t.jsx)("span",{children:"Available Balance:"}),(0,t.jsx)("span",{className:"font-bold",children:G?(0,I.formatPrice)(e.wallet_balance,G):e.wallet_balance.toFixed(2)})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(J,{trigger:(0,t.jsx)(a.Button,{disabled:!e||!e.id,className:"w-full py-3 rounded mt-4 bg-blue-500 hover:bg-blue-600 text-white",children:"Place Order"}),total:G?(0,I.formatPrice)(es,G):es,payemtMethod:q,handlePlaceOrder:()=>ei({...er},{onSuccess:e=>{P(!1),el({store_id:C,order_id:e?.data?.order_id},{onSuccess:e=>{var t;let a,s,r,l;z((0,B.clearCart)()),h(0),O("cash");let i=(t=e?.data,a=t?.invoice,s=t?.store_details,r=(t?.qr_code).replace(/\n/g,"").replace(/\r/g,""),l=Q?.com_pos_settings_print_invoice==="thermal",`
  <html>
    <head>
      <title>Invoice ${a.invoice_number}</title>
      <style>
        body {
          font-family: Arial, sans-serif;
          ${l?"max-width: 80mm;":"width: 210mm;"} 
          margin: 0 auto;
          ${l?"padding: 10px;":"padding: 20mm 15mm;"}
          font-size: ${l?"13px":"14px"};
          color: #000;
        }
          @page {
          size: ${l?"80mm auto":"A4"}; 
          margin: ${l?"5mm":"15mm"}; /* printing margins */
        }
        .center { text-align: center; }
        .bold { font-weight: bold; }
        .line { border-top: 1px dashed #000; margin: 8px 0; }
        table { width: 100%; border-collapse: collapse; margin-top: 5px; }
        th, td { padding: 4px; text-align: left; font-size: ${l?"12px":"14px"}; }
        td { vertical-align: top; }
        .right { text-align: right; }
        .totals { margin-top: 10px; }
        .qr-code { margin-top: 10px; text-align: center; }
        .qr-code img { width: 80px; height: 80px; }
      </style>
    </head>
    <body>
      <!-- Header -->
      <div class="center">
        <img
          src="${s?.logo}"
          alt="Store Logo"
          style="width: ${l?"50px":"80px"}; height: ${l?"50px":"80px"}; border-radius: 50%; object-fit: cover; margin: 0 auto 5px auto;"
        />
        <h2 style="margin: 0; font-size: ${l?"16px":"22px"};">${s?.name||"STORE NAME"}</h2>
        <p style="margin: 0; font-size: 12px;">${s?.address||""}</p>
        <p style="margin: 0; font-size: 12px;"><b>Contact:</b> ${s?.phone}, ${s?.email}</p>
        <h3 style="margin: 5px 0; font-size: ${l?"14px":"18px"};">INVOICE PAID</h3>
      </div>

      <!-- Invoice Details -->
      <p><b>Invoice:</b> ${a.invoice_number}</p>
      <p><b>Customer:</b> ${a.customer?.name}</p>
      <p><b>Date:</b> ${a.invoice_date}</p>
      <div class="line"></div>

      <!-- Items Table -->
      <table>
        <thead>
          <tr>
            <th>PRODUCT</th>
            <th class="center">QTY</th>
            <th class="right">PRICE</th>
            <th class="right">TOTAL</th>
          </tr>
        </thead>
        <tbody>
          ${a.items.map(e=>`
              <tr>
                <td>${e.name}<br/>
                  <small>${Object.entries(e.variant).map(([e,t])=>`${e}: ${t}`).join(", ")}</small>
                </td>
                <td class="center">${e.quantity}</td>
                <td class="right">${G?(0,I.formatPrice)(e.price,G):e.price}</td>
                <td class="right">${G?(0,I.formatPrice)(e.amount,G):e.amount}</td>
              </tr>
            `).join("")}
        </tbody>
      </table>

      <div class="line"></div>

      <!-- Totals -->
      <div class="totals">
        <p><b>Sub Total:</b> ${G?(0,I.formatPrice)(a.subtotal,G):a.subtotal}</p>
        <p><b>Tax ${E[0]?.store_tax?`(${(0,D.formatNumberOnly)(Number(E[0].store_tax),G)}%)`:""}:</b> ${G?(0,I.formatPrice)(a.total_tax_amount,G):a.total_tax_amount}</p>
        <p><b>Coupon Discount:</b> ${G?(0,I.formatPrice)(a.coupon_discount,G):a.coupon_discount}</p>
        <div class="line"></div>
        <p><b>Total:</b> ${G?(0,I.formatPrice)(a.total_amount,G):a.total_amount}</p>
      </div>

      <div class="line"></div>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div class="center">
          <p>Thank you for shopping!</p>
          <small>Powered by POS System</small>
        </div>
        <div class="qr-code">
          <img src="${r}" alt="QR Code" />
        </div>
      </div>
    </body>
  </html>`),n=window.open("","_blank");if(n){n.document.write(i),n.document.close(),n.focus();let e=n.document.querySelector("img");e?e.onload=()=>{n.print(),n.close()}:(n.print(),n.close())}},onError:e=>{console.error("Invoice error:",e)}})}}),isModalOpen:$,setIsModalOpen:P,isPending:en}),(0,t.jsx)(K.default,{trigger:(0,t.jsx)(a.Button,{className:"w-full py-3 rounded mt-4 bg-red-500 hover:bg-red-600 text-white",children:"Clear Cart"}),onSave:()=>{z((0,B.clearCart)()),h(0),O("cash")},title:"Clear Cart!",subTitle:"Are you sure you want to Clear Cart?"})]})]})})})})})})};var Z=e.i(945947),ee=e.i(560989),et=e.i(994814),ea=e.i(653145),es=e.i(681307);es.z.object({id:es.z.string()});let er={first_name:es.z.string().min(2,{message:"First name must be at least 2 characters long"}).max(255,{message:"First name must be at most 255 characters long"}),last_name:es.z.string().max(255,{message:"Last name must be at most 255 characters long"}).optional(),phone:es.z.string().optional(),email:es.z.string().min(2,{message:"Email must be at least 2 characters long"}).max(255,{message:"Email must be at most 255 characters long"}).email({message:"Invalid email address"})},el=es.z.object({...er}),ei=({trigger:e,listRefetch:a})=>{let s=(0,m.useAppDispatch)(),r=(0,l.useTranslations)(),n=(0,p.usePathname)().split("/")[1],[d,o]=(0,i.useState)(""),[x,u]=(0,i.useState)(!1),[h,g]=(0,i.useState)(!1),b=(0,m.useAppSelector)(e=>e.store.selectedStore),f=b?.id,{register:y,handleSubmit:j,formState:{errors:v},setValue:N,watch:_,reset:w,control:k}=(0,ea.useForm)({resolver:(0,et.zodResolver)(el)}),{mutate:S,isPending:C}=(0,M.usePosCustomerStoreMutation)(),$=async e=>S({...{...{first_name:e.first_name,last_name:e.last_name,email:e.email,phone:e.phone,store_id:f}}},{onSuccess:()=>{w(),a(),s((0,ee.setRefetch)(!0)),g(!1)}});return(0,t.jsx)(H.AppModal,{trigger:e,actionButtonLabel:C?"Adding...":"Add",customClass:"inset-x-35p top-[200px] bg-white",onSave:j($),isOpen:h,onOpenChange:g,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Add Customer"}),(0,t.jsx)("div",{dir:"ar"===n?"rtl":"ltr",children:(0,t.jsx)("form",{onSubmit:j($),children:(0,t.jsx)("div",{className:"mt-4 p-4",children:(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:r("label.first_name")}),(0,t.jsx)(c.Input,{id:"first_name",...y("first_name"),className:"app-input",placeholder:r("place_holder.enter_first_name")}),v.first_name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.first_name?.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:r("label.last_name")}),(0,t.jsx)(c.Input,{id:"last_name",...y("last_name"),className:"app-input",placeholder:r("place_holder.enter_last_name")}),v.last_name&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.last_name?.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium mb-1",children:r("label.email")}),(0,t.jsx)(c.Input,{id:"email",...y("email"),className:"app-input",placeholder:r("place_holder.enter_email")}),v.email&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.email?.message})]}),(0,t.jsxs)("div",{className:"mr-3",children:[(0,t.jsxs)("p",{className:"text-sm font-medium mb-1",children:[r("label.phone")," "]}),(0,t.jsx)(Z.default,{value:d,onChange:e=>{o(e),N("phone",e)}}),v.phone&&(0,t.jsx)("p",{className:"text-red-500 text-sm mt-1",children:v.phone?.message})]})]})})})})]})})};var en=e.i(772089);let ed=({setCustomerDetails:e})=>{(0,l.useTranslations)(),(0,m.useAppDispatch)();let r=(0,m.useAppSelector)(e=>e.store.selectedStore),n=r?.id,[d,c]=(0,i.useState)(""),[o,u]=(0,i.useState)(""),{posCustomers:p,refetch:h,isFetching:g}=(0,M.usePosCustomerList)({store_id:n,search:o}),b=p?.data||[];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.Card,{className:"",children:(0,t.jsxs)(s.CardContent,{className:"space-y-4 p-2 md:p-4",children:[(0,t.jsx)("div",{className:"py-2 md:py-0",children:(0,t.jsxs)("h1",{className:"text-md xl:text-2xl font-semibold text-black dark:text-white flex items-center gap-2",children:[" ",(0,t.jsx)(x.PackageSearch,{})," Billing"]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(en.AppSelectDetails,{placeholder:"Select Customer Info",value:String(d),onSelect:t=>{let a=b.find(e=>String(e.id)===String(t)),s=String(t);"none"===t?(c(""),e("")):(c(s),e({id:a.id,wallet_balance:a.wallet_balance}))},groups:b,customClass:"w-full ",onSearch:e=>{u(e),h()},search:o,loading:g})}),(0,t.jsx)("div",{className:"relative flex items-center gap-2 w-full",children:(0,t.jsx)(ei,{trigger:(0,t.jsx)(a.Button,{variant:"outline",className:"app-button w-full",children:"Add Customer"}),listRefetch:h})})]})]})})})};var ec=e.i(157616);let eo=()=>{let e=(0,l.useTranslations)(),[n,d]=(0,i.useState)(null),[c,o]=(0,i.useState)(1),[x,u]=(0,i.useState)([]),[p,g]=(0,i.useState)({}),[b,f]=(0,i.useState)(""),[y,j]=(0,i.useState)(""),v=(0,m.useAppSelector)(e=>e.store.selectedStore),N=v?.id,{product:_,refetch:w,isPending:k,isFetching:S}=(0,M.useProductListQuery)({page:c,store_id:N,search:b,category_id:y}),$=(0,i.useMemo)(()=>{let e=_?.data||[];return e?.map(e=>{let t=e.flash_sale||null;return{id:e.id,title:e.name||"Unknown Product",imageSrc:e.image_url||"",price:e.price||0,special_price:e.special_price||0,effective_price:e.effective_price||0,rating:e.rating,reviews:e.review_count,ifWishlist:e.wishlist,slug:e.slug,Stock:e.stock||0,max_cart_qty:e.max_cart_qty||1,status:e.is_featured?"Featured":"",discount:e.discount_percentage,variantsList:e.singleVariant,store_id:e.store_id,unit:e.unit,store:e.store?.name,store_tax:e.store?.tax,area_id:e.store?.area_id,store_delivery_time:e.store?.delivery_time,attributes:e.attributes,additional_charge_name:e.store?.additional_charge_name,additional_charge_amount:e.store?.additional_charge_amount,additional_charge_type:e.store?.additional_charge_type,flash_sale:t?{flash_sale_id:t.flash_sale_id,discount_type:t.discount_type,discount_amount:t.discount_amount,purchase_limit:t.purchase_limit}:null}})},[_,e]);return(0,i.useEffect)(()=>{let e=_?.meta?.current_page;$.length?u(t=>1===e?$:Array.from(new Map([...t,...$].map(e=>[e.id,e])).values())):1===e&&u([]),d(_?.meta?.links?.next||null)},[$,_]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-0 xl:gap-4 ",children:[(0,t.jsxs)("div",{className:"space-y-4 col-span-3 mb-4 xl:mb-0 ",children:[(0,t.jsx)(h,{finalSelectedID:y,setfinalSelectedID:j,setSearchValue:f}),(0,t.jsx)(s.Card,{children:(0,t.jsx)(s.CardContent,{className:"space-y-4 p-2 md:p-4",children:k&&1===c?(0,t.jsx)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3",children:Array(15).fill(0).map((e,a)=>(0,t.jsxs)("div",{className:"grid-item w-auto h-[300px] border p-2 rounded-md dark:border-[#374151]",children:[(0,t.jsx)(r.Skeleton,{className:"w-full h-[150px] rounded-lg mb-6 bg-gray-300 dark:bg-white"}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(r.Skeleton,{className:"h-5 w-1/2 bg-gray-300 dark:bg-white"}),(0,t.jsx)(r.Skeleton,{className:"h-5 w-4/4 bg-gray-300 dark:bg-white"}),(0,t.jsx)(r.Skeleton,{className:"h-5 w-3/4 bg-gray-300 dark:bg-white"}),(0,t.jsx)(r.Skeleton,{className:"h-5 w-1/4 bg-gray-300 dark:bg-white"})]})]},a))}):x.length>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:x.map((e,a)=>(0,t.jsx)("div",{className:"grid-item flex items-center justify-center",children:(0,t.jsx)(Q,{...e},`${e.id}-${a}`)},a))}),n&&(0,t.jsx)("div",{className:"flex justify-center my-4",children:(0,t.jsx)(a.Button,{disabled:S,onClick:()=>{n&&o(e=>e+1)},className:"app-button px-6 py-2 w-[150px] ",children:S?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.default,{size:"small"})," ",(0,t.jsx)("span",{className:"px-2",children:"Loading more..."})]}):"Load More"})})]}):(0,t.jsx)("div",{className:"w-full flex items-center justify-center mt-6",children:(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-gray-500 dark:text-white py-10",children:[(0,t.jsx)(ec.default,{}),(0,t.jsx)("p",{className:"mt-2 text-sm text-gray-500 dark:text-white font-bold",children:e("common.not_data_found")})]})})})})]}),(0,t.jsxs)("div",{className:"relative col-span-2 space-y-4",children:[(0,t.jsx)(ed,{setCustomerDetails:g}),(0,t.jsx)(G,{customerDetails:p})]})]})})};e.s(["default",0,()=>(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(eo,{})})],205019)}]);